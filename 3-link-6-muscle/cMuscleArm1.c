/***************************************************
 * DO NOT EDIT MANUALLY!
 * Automatically generated by Maple.
 * Created On: Sat May 21 18:55:29 2011.
***************************************************/

#define S_FUNCTION_NAME cMuscleArm1
#define S_FUNCTION_LEVEL 2

#include "simstruc.h"
#include "math.h"

/***************************************************
* Variable Definition for System:

* State variable(s):
*    x[ 0] = `Main.MuscleArm1.'Muscle1::HillMuscle1::D4'.x`(t)
*    x[ 1] = `Main.MuscleArm1.'Muscle2::HillMuscle1::D4'.x`(t)
*    x[ 2] = `Main.MuscleArm1.'Muscle3::HillMuscle1::D4'.x`(t)
*    x[ 3] = `Main.MuscleArm1.'Muscle4::HillMuscle1::D4'.x`(t)
*    x[ 4] = `Main.MuscleArm1.'Muscle7::HillMuscle1::D4'.x`(t)
*    x[ 5] = `Main.MuscleArm1.'Muscle8::HillMuscle1::D4'.x`(t)
*    x[ 6] = `Main.MuscleArm1.DFPSubsys1inst.s_Muscle1_MLength`(t)
*    x[ 7] = diff(`Main.MuscleArm1.DFPSubsys1inst.s_Muscle1_MLength`(t),t)
*    x[ 8] = `Main.MuscleArm1.DFPSubsys1inst.s_Muscle2_MLength`(t)
*    x[ 9] = diff(`Main.MuscleArm1.DFPSubsys1inst.s_Muscle2_MLength`(t),t)
*    x[10] = `Main.MuscleArm1.DFPSubsys1inst.s_Muscle3_MLength`(t)
*    x[11] = diff(`Main.MuscleArm1.DFPSubsys1inst.s_Muscle3_MLength`(t),t)
*    x[12] = `Main.MuscleArm1.DFPSubsys1inst.s_Muscle4_MLength`(t)
*    x[13] = diff(`Main.MuscleArm1.DFPSubsys1inst.s_Muscle4_MLength`(t),t)
*    x[14] = `Main.MuscleArm1.DFPSubsys1inst.s_Muscle7_MLength`(t)
*    x[15] = diff(`Main.MuscleArm1.DFPSubsys1inst.s_Muscle7_MLength`(t),t)
*    x[16] = `Main.MuscleArm1.DFPSubsys1inst.s_Muscle8_MLength`(t)
*    x[17] = diff(`Main.MuscleArm1.DFPSubsys1inst.s_Muscle8_MLength`(t),t)
*    x[18] = `Main.MuscleArm1.DFPSubsys1inst.theta_Muscle1_R4`(t)
*    x[19] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_Muscle1_R4`(t),t)
*    x[20] = `Main.MuscleArm1.DFPSubsys1inst.theta_Muscle2_R4`(t)
*    x[21] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_Muscle2_R4`(t),t)
*    x[22] = `Main.MuscleArm1.DFPSubsys1inst.theta_Muscle3_R4`(t)
*    x[23] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_Muscle3_R4`(t),t)
*    x[24] = `Main.MuscleArm1.DFPSubsys1inst.theta_Muscle4_R4`(t)
*    x[25] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_Muscle4_R4`(t),t)
*    x[26] = `Main.MuscleArm1.DFPSubsys1inst.theta_Muscle7_R4`(t)
*    x[27] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_Muscle7_R4`(t),t)
*    x[28] = `Main.MuscleArm1.DFPSubsys1inst.theta_Muscle8_R4`(t)
*    x[29] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_Muscle8_R4`(t),t)
*    x[30] = `Main.MuscleArm1.DFPSubsys1inst.theta_R1`(t)
*    x[31] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_R1`(t),t)
*    x[32] = `Main.MuscleArm1.DFPSubsys1inst.theta_R2`(t)
*    x[33] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_R2`(t),t)
*    x[34] = `Main.MuscleArm1.DFPSubsys1inst.theta_R3`(t)
*    x[35] = diff(`Main.MuscleArm1.DFPSubsys1inst.theta_R3`(t),t)
*
* Output variable(s):
*    y[ 0] = `Main.MuscleArm1.DFPSubsys1inst.theta_R2`(t)
*    y[ 1] = `Main.MuscleArm1.DFPSubsys1inst.theta_R1`(t)
*    y[ 2] = `Main.MuscleArm1.DFPSubsys1inst.theta_R3`(t)
*    y[ 3] = `Main.'MuscleArm1::emR1'`(t)
*    y[ 4] = `Main.'MuscleArm1::emR2'`(t)
*    y[ 5] = `Main.'MuscleArm1::emR3'`(t)
*
* Input variable(s):
*    u[ 0] = `Main.'MuscleArm1::ma1'`(t)
*    u[ 1] = `Main.'MuscleArm1::ma2'`(t)
*    u[ 2] = `Main.'MuscleArm1::ma3'`(t)
*    u[ 3] = `Main.'MuscleArm1::ma4'`(t)
*    u[ 4] = `Main.'MuscleArm1::ma7'`(t)
*    u[ 5] = `Main.'MuscleArm1::ma8'`(t)
*
************************************************/

/* Configurable parameters */
#define CONITER 3
#define CONTOL 1.000000e-05

/* Fixed parameters */
#define NDIFF 36
#define NEQ 117
#define NPAR 0
#define NINP 6
#define NDISC 0
#define NIX1 81
#define NOUT 6
#define NCON 24
#define NEVT 0
#ifdef EVTHYST
#define NZC 2*NEVT
#else
#define NZC 2*NEVT
#endif

static real_T dsn_zero=0.0;
static unsigned char dsn_undefC[8] = { 0, 0, 0, 0, 0, 0, 0xF0, 0x7F };
static real_T *dsn_undef = (real_T *)&dsn_undefC;
static unsigned char dsn_posinfC[8] = { 0, 0, 0, 0, 0, 0, 0xF0, 0xFF };
static real_T *dsn_posinf = (real_T *)&dsn_posinfC;
static unsigned char dsn_neginfC[8] = { 0, 0, 0, 0, 0, 0, 0xF8, 0x7F };
static real_T *dsn_neginf = (real_T *)&dsn_neginfC;
#define trunc(v) ( (v>0.0) ? floor(v) : ceil(v) )


void DecompCInc(int_T n, real_T *A, int_T Ainc, int_T *ip)
{
	int_T i,j,k,m;
	real_T t;

	ip[n-1]=1;
	for(k=0;k<n-1;k++) {
		m=k;
		for(i=k+1;i<n;i++)
			if( fabs(A[i*Ainc+k])>fabs(A[m*Ainc+k]) ) m=i;
		ip[k]=m;
		if( m!=k ) ip[n-1]=-ip[n-1];
		t=A[m*Ainc+k]; A[m*Ainc+k]=A[(Ainc+1)*k]; A[(Ainc+1)*k]=t;
		if( t==0.0 ) { ip[n-1]=0; return; }
		t=-1.0/t;
		for(i=k+1;i<n;i++) A[i*Ainc+k]=A[i*Ainc+k]*t;
		for(j=k+1;j<n;j++) {
			t=A[m*Ainc+j]; A[m*Ainc+j]=A[k*Ainc+j]; A[k*Ainc+j]=t;
			if( t!=0.0 )
				for(i=k+1;i<n;i++) A[i*Ainc+j]+=A[i*Ainc+k]*t;
		}
	}
	if(A[(n-1)*(Ainc+1)]==0.0) ip[n-1]=0;
}
void DecompC(int_T n, real_T *A, int_T *ip) { DecompCInc(n,A,n,ip); }


void MultiSolveCInc(int_T n, real_T *A, int_T Ainc, int_T *ip, int_T nb, real_T *b, int_T binc)
{
	int_T i,j,k,m;
	real_T t;

	if( n>1 ) {
		for(j=0;j<n-1;j++) {
			m=ip[j];
			for(k=0;k<nb;k++) {
				t=b[m*binc+k]; b[m*binc+k]=b[j*binc+k]; b[j*binc+k]=t;
				for(i=j+1;i<n;i++) b[i*binc+k]+=A[i*Ainc+j]*t;
			}
		}
		for(j=n-1;j>0;j--) {
			for(k=0;k<nb;k++) {
				b[j*binc+k]=b[j*binc+k]/A[(Ainc+1)*j];
				t=-b[j*binc+k];
				for(i=0;i<=j-1;i++) b[i*binc+k]+=A[i*Ainc+j]*t;
			}
		}
	}
	for(k=0;k<nb;k++)
		b[k]=b[k]/A[0];
}
void MultiSolveC(int_T n, real_T *A, int_T *ip, int_T nb, real_T *b) { MultiSolveCInc(n,A,n,ip,nb,b,nb); }


void SolveCInc(int_T n, real_T *A, int_T Ainc, int_T *ip, real_T *b)
{
	int_T i,j,m;
	real_T t;

	if( n>1 ) {
		for(j=0;j<n-1;j++) {
			m=ip[j];
			t=b[m]; b[m]=b[j]; b[j]=t;
			for(i=j+1;i<n;i++) b[i]+=A[i*Ainc+j]*t;
		}
		for(j=n-1;j>0;j--) {
			b[j]=b[j]/A[(Ainc+1)*j];
			t=-b[j];
			for(i=0;i<=j-1;i++) b[i]+=A[i*Ainc+j]*t;
		}
	}
	b[0]=b[0]/A[0];
}
void SolveC(int_T n, real_T *A, int_T *ip, real_T *b) { SolveCInc(n,A,n,ip,b); }


void fp(int_T N, real_T T, real_T *Y, real_T *YP)
{
	real_T M[9], V[3], Z[69];
	int_T P[3], ti1, ti2;

	YP[6] = Y[7];
	YP[8] = Y[9];
	YP[10] = Y[11];
	YP[12] = Y[13];
	YP[14] = Y[15];
	YP[16] = Y[17];
	YP[18] = Y[19];
	YP[20] = Y[21];
	YP[22] = Y[23];
	YP[24] = Y[25];
	YP[26] = Y[27];
	YP[28] = Y[29];
	YP[30] = Y[31];
	YP[32] = Y[33];
	YP[34] = Y[35];
	M[0] = 2.;
	V[0] = -(1.+tanh(314159.265358979324*Y[30]-955544.51357303793));
	Y[38] = V[0]/M[0];
	M[0] = 0.001;
	V[0] = Y[31]+0.1*Y[30];
	Y[39] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[38]*Y[39];
	Y[40] = V[0]/M[0];
	M[0] = 2.;
	V[0] = -(1.+tanh(-31415.9265358979324-314159.265358979324*Y[30]));
	Y[36] = V[0]/M[0];
	M[0] = 0.001;
	V[0] = Y[31]+0.1*Y[30];
	Y[37] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[40]+Y[36]*Y[37];
	Y[105] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = fabs(10000.*(Y[0]-Y[6]));
	V[0] = sqrt(Z[0]*Z[0]);
	Y[51] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = Y[51]+0.009;
	Z[0] = 1.0/Z[0];
	V[0] = 0.009*Z[0];
	Y[55] = V[0]/M[0];
	M[0] = -0.009;
	V[0] = tanh(3141592653.58979324*(Y[6]-Y[0]))-1.25;
	Y[52] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[111]*Y[52]+0.02;
	Y[53] = V[0]/M[0];
	M[0] = 1.;
	V[0] = -10000.*(Y[0]-Y[6])*Y[53];
	Y[54] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[111]-Y[54];
	Y[56] = V[0]/M[0];
	M[0] = -1.;
	V[0] = Y[55]*Y[56];
	Y[87] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = fabs(10000.*(Y[1]-Y[8]));
	V[0] = sqrt(Z[0]*Z[0]);
	Y[57] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = Y[57]+0.009;
	Z[0] = 1.0/Z[0];
	V[0] = 0.009*Z[0];
	Y[61] = V[0]/M[0];
	M[0] = -0.009;
	V[0] = tanh(3141592653.58979324*(Y[8]-Y[1]))-1.25;
	Y[58] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[112]*Y[58]+0.02;
	Y[59] = V[0]/M[0];
	M[0] = 1.;
	V[0] = -10000.*(Y[1]-Y[8])*Y[59];
	Y[60] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[112]-Y[60];
	Y[62] = V[0]/M[0];
	M[0] = -1.;
	V[0] = Y[61]*Y[62];
	Y[88] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = fabs(10000.*(Y[2]-Y[10]));
	V[0] = sqrt(Z[0]*Z[0]);
	Y[63] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = Y[63]+0.009;
	Z[0] = 1.0/Z[0];
	V[0] = 0.009*Z[0];
	Y[67] = V[0]/M[0];
	M[0] = -0.009;
	V[0] = tanh(3141592653.58979324*(Y[10]-Y[2]))-1.25;
	Y[64] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[113]*Y[64]+0.02;
	Y[65] = V[0]/M[0];
	M[0] = 1.;
	V[0] = -10000.*(Y[2]-Y[10])*Y[65];
	Y[66] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[113]-Y[66];
	Y[68] = V[0]/M[0];
	M[0] = -1.;
	V[0] = Y[67]*Y[68];
	Y[89] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = fabs(10000.*(Y[3]-Y[12]));
	V[0] = sqrt(Z[0]*Z[0]);
	Y[69] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = Y[69]+0.009;
	Z[0] = 1.0/Z[0];
	V[0] = 0.009*Z[0];
	Y[73] = V[0]/M[0];
	M[0] = -0.009;
	V[0] = tanh(3141592653.58979324*(Y[12]-Y[3]))-1.25;
	Y[70] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[114]*Y[70]+0.02;
	Y[71] = V[0]/M[0];
	M[0] = 1.;
	V[0] = -10000.*(Y[3]-Y[12])*Y[71];
	Y[72] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[114]-Y[72];
	Y[74] = V[0]/M[0];
	M[0] = -1.;
	V[0] = Y[73]*Y[74];
	Y[90] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = fabs(10000.*(Y[4]-Y[14]));
	V[0] = sqrt(Z[0]*Z[0]);
	Y[75] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = Y[75]+0.027;
	Z[0] = 1.0/Z[0];
	V[0] = 0.027*Z[0];
	Y[79] = V[0]/M[0];
	M[0] = -0.027;
	V[0] = tanh(3141592653.58979324*(Y[14]-Y[4]))-1.25;
	Y[76] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[115]*Y[76]+0.02;
	Y[77] = V[0]/M[0];
	M[0] = 1.;
	V[0] = -10000.*(Y[4]-Y[14])*Y[77];
	Y[78] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[115]-Y[78];
	Y[80] = V[0]/M[0];
	M[0] = -1.;
	V[0] = Y[79]*Y[80];
	Y[91] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = fabs(10000.*(Y[5]-Y[16]));
	V[0] = sqrt(Z[0]*Z[0]);
	Y[81] = V[0]/M[0];
	M[0] = 1.;
	Z[0] = Y[81]+0.045;
	Z[0] = 1.0/Z[0];
	V[0] = 0.045*Z[0];
	Y[85] = V[0]/M[0];
	M[0] = -0.045;
	V[0] = tanh(3141592653.58979324*(Y[16]-Y[5]))-1.25;
	Y[82] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[116]*Y[82]+0.02;
	Y[83] = V[0]/M[0];
	M[0] = 1.;
	V[0] = -10000.*(Y[5]-Y[16])*Y[83];
	Y[84] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[116]-Y[84];
	Y[86] = V[0]/M[0];
	M[0] = -1.;
	V[0] = Y[85]*Y[86];
	Y[92] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 0.;
	Y[93] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 0.;
	Y[94] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 0.;
	Y[95] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 0.;
	Y[96] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 0.;
	Y[97] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 0.;
	Y[98] = V[0]/M[0];
	M[0] = Y[6];
	V[0] = 0.;
	Y[99] = V[0]/M[0];
	M[0] = Y[8];
	V[0] = 0.;
	Y[100] = V[0]/M[0];
	M[0] = Y[10];
	V[0] = 0.;
	Y[101] = V[0]/M[0];
	M[0] = Y[12];
	V[0] = 0.;
	Y[102] = V[0]/M[0];
	M[0] = Y[14];
	V[0] = 0.;
	Y[103] = V[0]/M[0];
	M[0] = Y[16];
	V[0] = 0.;
	Y[104] = V[0]/M[0];
	M[0] = 2.;
	V[0] = -(1.+tanh(314159.265358979324*Y[32]-955544.51357303793));
	Y[43] = V[0]/M[0];
	M[0] = 0.001;
	V[0] = Y[33]+0.1*Y[32];
	Y[44] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[43]*Y[44];
	Y[45] = V[0]/M[0];
	M[0] = 2.;
	V[0] = -(1.+tanh(-31415.9265358979324-314159.265358979324*Y[32]));
	Y[41] = V[0]/M[0];
	M[0] = 0.001;
	V[0] = Y[33]+0.1*Y[32];
	Y[42] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[45]+Y[41]*Y[42];
	Y[106] = V[0]/M[0];
	M[0] = 2.;
	V[0] = -(1.+tanh(314159.265358979324*Y[34]-955544.51357303793));
	Y[48] = V[0]/M[0];
	M[0] = 0.001;
	V[0] = Y[35]+0.1*Y[34];
	Y[49] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[48]*Y[49];
	Y[50] = V[0]/M[0];
	M[0] = 2.;
	V[0] = -(1.+tanh(-31415.9265358979324-314159.265358979324*Y[34]));
	Y[46] = V[0]/M[0];
	M[0] = 0.001;
	V[0] = Y[35]+0.1*Y[34];
	Y[47] = V[0]/M[0];
	M[0] = 1.;
	V[0] = Y[50]+Y[46]*Y[47];
	Y[107] = V[0]/M[0];
	for(ti1=1;ti1<=3;ti1++)
		for(ti2=1;ti2<=3;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=3;ti1++)
		V[ti1-1] = 0.;
	Z[0] = cos(Y[34]);
	Z[1] = 0.25-0.05*Z[0];
	Z[2] = sin(Y[34]);
	Z[3] = Z[2]*Z[2];
	Z[4] = Z[1]*Z[1]+0.0025*Z[3];
	Z[5] = cos(Y[30]);
	Z[6] = 0.08*Z[5];
	Z[7] = Z[6]-0.055;
	Z[8] = sin(Y[30]);
	Z[9] = 0.0064*Z[8]*Z[8];
	Z[10] = Z[7]*Z[7]+Z[9];
	Z[6] = Z[6]+0.055;
	Z[9] = Z[6]*Z[6]+Z[9];
	Z[11] = cos(Y[32]);
	Z[12] = 0.03*Z[11];
	Z[13] = -Z[12]+0.12;
	Z[14] = sin(Y[32]);
	Z[15] = 0.0009*Z[14]*Z[14];
	Z[16] = Z[13]*Z[13]+Z[15];
	Z[17] = Z[12]+0.12;
	Z[15] = Z[17]*Z[17]+Z[15];
	Z[18] = 0.035*Z[0]+0.22;
	Z[3] = Z[18]*Z[18]+0.001225*Z[3];
	Z[19] = Z[11]*Z[0]-Z[14]*Z[2];
	Z[20] = Z[14]*Z[0]+Z[11]*Z[2];
	Z[21] = Z[5]*Z[19]-Z[8]*Z[20];
	Z[22] = 0.225*Z[11];
	Z[23] = 0.025*Z[19];
	Z[24] = Z[22]+Z[23]+0.31;
	Z[25] = -0.025*Z[20]-0.225*Z[14];
	Z[26] = Z[25]*Z[8];
	Z[27] = Z[24]*Z[5]+Z[26];
	Z[28] = Z[8]*Z[19]+Z[5]*Z[20];
	Z[24] = Z[25]*Z[5]-Z[24]*Z[8];
	M[0] = 0.001+0.00875*(Z[21]*Z[27]-Z[28]*Z[24]);
	Z[22] = (Z[22]+Z[23])*Z[5]+Z[26];
	Z[23] = -(Z[8]*Z[11]+Z[5]*Z[14]);
	Z[25] = 0.025*Z[28];
	Z[26] = -Z[25]+0.225*Z[23];
	M[1] = 0.001+0.00875*(Z[21]*Z[22]-Z[28]*Z[26]);
	Z[29] = 0.025*Z[21];
	M[2] = 0.001+0.00875*(Z[21]*Z[29]+Z[28]*Z[25]);
	Z[30] = Y[31]+Y[33];
	Z[31] = -Z[23];
	Z[32] = Y[31]+Y[35]+Y[33];
	Z[32] = Z[32]*Z[32];
	Z[30] = Z[30]*Z[30];
	Z[33] = Y[31]*Y[31];
	Z[34] = 0.31*Z[33];
	Z[35] = 0.225*Z[30];
	Z[36] = -(Z[34]*Z[8]+Z[35]*Z[31]+Z[25]*Z[32]);
	Z[37] = Z[5]*Z[11]-Z[8]*Z[14];
	Z[34] = -(Z[34]*Z[5]+Z[35]*Z[37]+Z[29]*Z[32]);
	Z[35] = sin(Y[26]);
	Z[38] = cos(Y[26]);
	if( Z[3]>0. )
		Z[39] = Y[91]/(sqrt(Z[3]));
	else
		Z[39] = 0.;
	Z[40] = Z[38]*Y[103];
	Z[41] = Z[35]*Y[97];
	Z[42] = -(Z[41]+Z[40])-0.035*Z[2]*Z[39];
	Z[18] = Z[35]*Y[103]-Z[38]*Y[97]-Z[18]*Z[39];
	Z[35] = sin(Y[28]);
	Z[38] = cos(Y[28]);
	if( Z[4]>0. )
		Z[43] = Y[92]/(sqrt(Z[4]));
	else
		Z[43] = 0.;
	Z[44] = Z[35]*Y[98];
	Z[45] = Z[38]*Y[104];
	Z[46] = -(Z[44]+Z[45])+0.05*Z[2]*Z[43];
	Z[1] = Z[35]*Y[104]-Z[38]*Y[98]-Z[1]*Z[43];
	V[0] = Y[107]+0.05*(Z[0]*Z[46]-Z[1]*Z[2])+0.035*(Z[2]*Z[18]-Z[0]*Z[42])+0.00875*(Z[28]*Z[34]-Z[21]*Z[36]);
	Z[19] = 0.00875*Z[19];
	Z[35] = 0.19755*Z[11];
	Z[38] = -(Z[35]+Z[19])-0.5177;
	Z[20] = 0.00875*Z[20]+0.19755*Z[14];
	Z[47] = Z[8]*Z[20];
	Z[48] = Z[38]*Z[5]+Z[47];
	Z[20] = Z[5]*Z[20];
	Z[38] = Z[20]-Z[38]*Z[8];
	Z[21] = 0.00875*Z[21];
	Z[49] = Z[21]+0.04725*Z[37];
	Z[28] = 0.00875*Z[28];
	Z[50] = -Z[28]-0.04725*Z[31];
	Z[27] = Z[27]*Z[49];
	Z[24] = Z[50]*Z[24];
	Z[51] = 0.09*(Z[31]*Z[38]-Z[37]*Z[48]);
	M[3] = Z[24]+Z[51]+Z[27]+0.013;
	Z[23] = Z[28]-0.19755*Z[23];
	Z[52] = -(Z[35]+Z[19])*Z[5]+Z[47];
	Z[22] = Z[22]*Z[49];
	Z[26] = Z[50]*Z[26];
	Z[53] = 0.09*(Z[31]*Z[23]-Z[37]*Z[52]);
	M[4] = Z[26]+Z[53]+Z[22]+0.013;
	Z[29] = Z[29]*Z[49];
	Z[25] = -Z[50]*Z[25];
	Z[54] = 0.09*(Z[31]*Z[28]+Z[37]*Z[21]);
	M[5] = Z[25]+Z[54]+Z[29]+0.001;
	Z[55] = Z[28]*Z[32];
	Z[30] = 0.19755*Z[30];
	Z[56] = Z[30]*Z[31];
	Z[57] = 0.5177*Z[33];
	Z[58] = Z[57]*Z[8]+Z[56]+Z[55];
	Z[32] = Z[21]*Z[32];
	Z[30] = Z[30]*Z[37];
	Z[57] = Z[57]*Z[5]+Z[30]+Z[32];
	Z[59] = cos(Y[24]);
	Z[60] = sin(Y[24]);
	if( Z[16]>0. )
		Z[61] = Y[90]/(sqrt(Z[16]));
	else
		Z[61] = 0.;
	Z[13] = Z[60]*Y[102]-Z[59]*Y[96]-Z[13]*Z[61];
	Z[62] = sin(Y[22]);
	Z[63] = cos(Y[22]);
	if( Z[15]>0. )
		Z[64] = Y[89]/(sqrt(Z[15]));
	else
		Z[64] = 0.;
	Z[65] = Z[62]*Y[95];
	Z[66] = Z[63]*Y[101];
	Z[67] = 0.03*Z[14];
	Z[68] = -(Z[65]+Z[66]+Z[67]*Z[64]);
	Z[17] = Z[62]*Y[101]-Z[63]*Y[95]-Z[17]*Z[64];
	Z[60] = Z[60]*Y[96];
	Z[59] = Z[59]*Y[102];
	Z[62] = Z[67]*Z[61]-Z[60]-Z[59];
	Z[37] = Z[37]*Z[58];
	Z[63] = Y[16]*Y[104];
	Z[67] = Y[14]*Y[103];
	Z[40] = 0.22*(Z[40]+Z[41]);
	Z[41] = 0.25*(Z[44]+Z[45]);
	Z[0] = -0.005*(7.*Z[42]-10.*Z[46])*Z[0];
	Z[36] = Z[49]*Z[36];
	Z[1] = -0.0001*(-77.*Z[39]+125.*Z[43]-350.*Z[18]+500.*Z[1])*Z[2];
	V[1] = Z[1]+Z[41]+Z[40]+Z[0]+Y[106]-Z[36]-Z[67]-Z[63]-Z[50]*Z[34]+0.03*((Z[62]-Z[68])*Z[11]-(Z[13]-Z[17])*Z[14])+0.09*(Z[37]-Z[31]*Z[57]);
	Z[2] = Z[35]+Z[19]+0.81685;
	M[6] = Z[24]+Z[51]+Z[27]+0.155*((Z[2]*Z[5]-Z[47]-Z[48])*Z[5]+(Z[38]+Z[20]+Z[2]*Z[8])*Z[8])+0.0271;
	M[7] = Z[26]+Z[53]+Z[22]+0.013+0.31*(Z[23]*Z[8]-Z[52]*Z[5]);
	M[8] = Z[25]+Z[54]+Z[29]+0.001+0.31*(Z[21]*Z[5]+Z[28]*Z[8]);
	Z[2] = 0.81685*Z[33];
	Z[18] = sin(Y[20]);
	Z[19] = cos(Y[20]);
	if( Z[10]>0. )
		Z[20] = Y[88]/(sqrt(Z[10]));
	else
		Z[20] = 0.;
	Z[21] = 0.08*Z[8];
	Z[22] = cos(Y[18]);
	Z[23] = sin(Y[18]);
	if( Z[9]>0. )
		Z[24] = Y[87]/(sqrt(Z[9]));
	else
		Z[24] = 0.;
	Z[2] = 0.005*(16.*(Z[18]*Y[94]+Z[19]*Y[100]+Z[21]*Z[20]+Z[23]*Y[93]+Z[22]*Y[99]+Z[21]*Z[24])+31.*(Z[58]+Z[2]*Z[8]+Z[56]+Z[55]))*Z[5]-0.005*(16.*(Z[19]*Y[94]+Z[7]*Z[20]+Z[22]*Y[93]+Z[6]*Z[24]-Z[18]*Y[100]-Z[23]*Y[99])+31.*(Z[57]+Z[2]*Z[5]+Z[30]+Z[32]))*Z[8]-0.0012*(3.*Z[61]+25.*Z[13])*Z[14]+Z[12]*Z[62]+0.00225*(21.*Z[34]-40.*Z[57])*Z[31]+Y[105]-Y[12]*Y[102]-Z[63]-Z[67]-Y[10]*Y[101]+0.12*(Z[60]+Z[59]);
	V[2] = Z[1]+Z[0]+Z[28]*Z[34]+Z[41]+Z[40]+Z[2]-Z[36]+0.12*(Z[65]+Z[66])+0.03*(Z[14]*Z[17]-Z[11]*Z[68])+0.09*Z[37]+0.0036*Z[14]*Z[64];
	DecompCInc(3,M,3,P);
	SolveCInc(3,M,3,P,V);
	YP[31] = V[0];
	YP[33] = V[1];
	YP[35] = V[2];
	M[0] = 1.;
	V[0] = 10000.*(Y[6]-Y[0]);
	YP[0] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 10000.*(Y[8]-Y[1]);
	YP[1] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 10000.*(Y[10]-Y[2]);
	YP[2] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 10000.*(Y[12]-Y[3]);
	YP[3] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 10000.*(Y[14]-Y[4]);
	YP[4] = V[0]/M[0];
	M[0] = 1.;
	V[0] = 10000.*(Y[16]-Y[5]);
	YP[5] = V[0]/M[0];
	for(ti1=1;ti1<=2;ti1++)
		for(ti2=1;ti2<=2;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=2;ti1++)
		V[ti1-1] = 0.;
	Z[0] = sin(Y[18]);
	Z[1] = cos(Y[18]);
	Z[2] = Z[1]*Z[1]+Z[0]*Z[0];
	M[0] = -Y[6]*Z[2];
	Z[3] = Y[19]*Z[1]*Y[6];
	Z[4] = sin(Y[30]);
	Z[5] = cos(Y[30]);
	Z[6] = Y[31]*Y[31];
	Z[3] = (Z[3]+2.*Z[0]*Y[7])*Y[19]-0.08*(YP[31]*Z[4]+Z[6]*Z[5]);
	Z[7] = Y[19]*Z[0]*Y[6];
	Z[4] = -(-Z[7]+2.*Z[1]*Y[7])*Y[19]+0.08*(YP[31]*Z[5]-Z[6]*Z[4]);
	V[0] = Z[3]*Z[0]-Z[4]*Z[1];
	M[4] = -Z[2];
	V[1] = -(Z[3]*Z[1]+Z[4]*Z[0]);
	DecompCInc(2,M,3,P);
	SolveCInc(2,M,3,P,V);
	YP[19] = V[0];
	YP[7] = V[1];
	for(ti1=1;ti1<=2;ti1++)
		for(ti2=1;ti2<=2;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=2;ti1++)
		V[ti1-1] = 0.;
	Z[0] = sin(Y[20]);
	Z[1] = cos(Y[20]);
	Z[2] = Z[1]*Z[1]+Z[0]*Z[0];
	M[0] = -Y[8]*Z[2];
	Z[3] = Y[21]*Z[1]*Y[8];
	Z[4] = sin(Y[30]);
	Z[5] = cos(Y[30]);
	Z[6] = Y[31]*Y[31];
	Z[3] = (Z[3]+2.*Z[0]*Y[9])*Y[21]-0.08*(YP[31]*Z[4]+Z[6]*Z[5]);
	Z[7] = Y[21]*Z[0]*Y[8];
	Z[4] = -(-Z[7]+2.*Z[1]*Y[9])*Y[21]+0.08*(YP[31]*Z[5]-Z[6]*Z[4]);
	V[0] = Z[3]*Z[0]-Z[4]*Z[1];
	M[4] = -Z[2];
	V[1] = -(Z[3]*Z[1]+Z[4]*Z[0]);
	DecompCInc(2,M,3,P);
	SolveCInc(2,M,3,P,V);
	YP[21] = V[0];
	YP[9] = V[1];
	for(ti1=1;ti1<=2;ti1++)
		for(ti2=1;ti2<=2;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=2;ti1++)
		V[ti1-1] = 0.;
	Z[0] = sin(Y[30]);
	Z[1] = cos(Y[22]);
	Z[2] = cos(Y[30]);
	Z[3] = sin(Y[22]);
	Z[4] = Z[0]*Z[1]+Z[2]*Z[3];
	Z[1] = Z[1]*Z[2]-Z[3]*Z[0];
	Z[3] = -Z[4]*Z[4];
	M[0] = -Y[10]*(Z[1]*Z[1]-Z[3]);
	M[1] = 0.;
	Z[5] = 2.*(Y[31]+Y[23]);
	Z[6] = 0.5*Z[5];
	Z[7] = YP[31]+YP[33];
	Z[8] = cos(Y[32]);
	Z[9] = sin(Y[32]);
	Z[10] = Z[0]*Z[8]+Z[2]*Z[9];
	Z[11] = Y[31]+Y[33];
	Z[8] = Z[2]*Z[8]-Z[0]*Z[9];
	Z[9] = Z[11]*Z[11];
	Z[11] = Y[31]*Y[31];
	Z[12] = Z[6]*Z[6];
	Z[13] = (YP[31]*Z[4]-Z[12]*Z[1])*Y[10]+Z[5]*(Z[6]*Z[1]*Y[10]+Z[4]*Y[11])-0.12*(YP[31]*Z[0]+Z[11]*Z[2])-0.03*(Z[7]*Z[10]+Z[9]*Z[8]);
	Z[0] = -(YP[31]*Z[1]+Z[12]*Z[4])*Y[10]+Z[5]*(Z[6]*Z[4]*Y[10]-Z[1]*Y[11])+0.12*(YP[31]*Z[2]-Z[11]*Z[0])+0.03*(Z[7]*Z[8]-Z[9]*Z[10]);
	V[0] = Z[13]*Z[4]-Z[0]*Z[1];
	M[4] = Z[3]-Z[1]*Z[1];
	V[1] = -(Z[13]*Z[1]+Z[4]*Z[0]);
	DecompCInc(2,M,3,P);
	SolveCInc(2,M,3,P,V);
	YP[23] = V[0];
	YP[11] = V[1];
	for(ti1=1;ti1<=2;ti1++)
		for(ti2=1;ti2<=2;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=2;ti1++)
		V[ti1-1] = 0.;
	Z[0] = sin(Y[30]);
	Z[1] = cos(Y[24]);
	Z[2] = cos(Y[30]);
	Z[3] = sin(Y[24]);
	Z[4] = Z[0]*Z[1]+Z[2]*Z[3];
	Z[1] = Z[1]*Z[2]-Z[3]*Z[0];
	Z[3] = -Z[4]*Z[4];
	M[0] = -Y[12]*(Z[1]*Z[1]-Z[3]);
	M[1] = 0.;
	Z[5] = 2.*(Y[31]+Y[25]);
	Z[6] = 0.5*Z[5];
	Z[7] = YP[31]+YP[33];
	Z[8] = cos(Y[32]);
	Z[9] = sin(Y[32]);
	Z[10] = Z[0]*Z[8]+Z[2]*Z[9];
	Z[11] = Y[31]+Y[33];
	Z[8] = Z[2]*Z[8]-Z[0]*Z[9];
	Z[9] = Z[11]*Z[11];
	Z[11] = Y[31]*Y[31];
	Z[12] = Z[6]*Z[6];
	Z[13] = (YP[31]*Z[4]-Z[12]*Z[1])*Y[12]+Z[5]*(Z[6]*Z[1]*Y[12]+Z[4]*Y[13])-0.12*(YP[31]*Z[0]+Z[11]*Z[2])+0.03*(Z[7]*Z[10]+Z[9]*Z[8]);
	Z[0] = -(YP[31]*Z[1]+Z[12]*Z[4])*Y[12]+Z[5]*(Z[6]*Z[4]*Y[12]-Z[1]*Y[13])+0.12*(YP[31]*Z[2]-Z[11]*Z[0])+0.03*(Z[9]*Z[10]-Z[7]*Z[8]);
	V[0] = Z[13]*Z[4]-Z[0]*Z[1];
	M[4] = Z[3]-Z[1]*Z[1];
	V[1] = -(Z[13]*Z[1]+Z[4]*Z[0]);
	DecompCInc(2,M,3,P);
	SolveCInc(2,M,3,P,V);
	YP[25] = V[0];
	YP[13] = V[1];
	for(ti1=1;ti1<=2;ti1++)
		for(ti2=1;ti2<=2;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=2;ti1++)
		V[ti1-1] = 0.;
	Z[0] = sin(Y[30]);
	Z[1] = cos(Y[32]);
	Z[2] = cos(Y[26]);
	Z[3] = sin(Y[32]);
	Z[4] = sin(Y[26]);
	Z[5] = Z[1]*Z[2]-Z[3]*Z[4];
	Z[6] = cos(Y[30]);
	Z[2] = Z[2]*Z[3]+Z[4]*Z[1];
	Z[4] = Z[0]*Z[5];
	Z[7] = Z[4]+Z[6]*Z[2];
	Z[8] = -Z[2];
	Z[4] = Z[6]*Z[8]-Z[4];
	Z[5] = Z[6]*Z[5];
	Z[2] = Z[5]-Z[0]*Z[2];
	Z[5] = Z[0]*Z[8]+Z[5];
	M[0] = -Y[14]*(Z[2]*Z[5]-Z[7]*Z[4]);
	Z[8] = -Z[2];
	Z[9] = -Z[7];
	M[1] = Z[8]*Z[4]+Z[9]*Z[5];
	Z[10] = YP[31]+YP[33];
	Z[11] = 2.*(Y[31]+Y[27]+Y[33]);
	Z[12] = 0.5*Z[11];
	Z[13] = Z[0]*Z[1]+Z[6]*Z[3];
	Z[14] = Y[31]+Y[33];
	Z[15] = Z[6]*Z[1]-Z[3]*Z[0];
	Z[16] = YP[31]+YP[35]+YP[33];
	Z[17] = cos(Y[34]);
	Z[18] = sin(Y[34]);
	Z[19] = Z[1]*Z[17]-Z[3]*Z[18];
	Z[1] = Z[3]*Z[17]+Z[1]*Z[18];
	Z[3] = Z[0]*Z[19]+Z[6]*Z[1];
	Z[17] = Y[31]+Y[35]+Y[33];
	Z[0] = Z[6]*Z[19]-Z[0]*Z[1];
	Z[1] = Z[14]*Z[14];
	Z[6] = Z[12]*Z[12];
	Z[14] = Z[17]*Z[17];
	Z[17] = -(Z[6]*Z[2]-Z[7]*Z[10])*Y[14]+Z[11]*(Z[12]*Z[2]*Y[14]+Z[7]*Y[15])-0.035*(Z[16]*Z[3]+Z[14]*Z[0])-0.22*(Z[10]*Z[13]+Z[1]*Z[15]);
	Z[0] = -(Z[10]*Z[2]+Z[6]*Z[7])*Y[14]+Z[11]*(Z[12]*Z[7]*Y[14]-Z[2]*Y[15])+0.035*(Z[16]*Z[0]-Z[14]*Z[3])+0.22*(Z[10]*Z[15]-Z[13]*Z[1]);
	V[0] = -(Z[17]*Z[4]+Z[0]*Z[5]);
	M[4] = Z[2]*Z[8]+Z[9]*Z[7];
	V[1] = -(Z[17]*Z[2]+Z[0]*Z[7]);
	DecompCInc(2,M,3,P);
	SolveCInc(2,M,3,P,V);
	YP[27] = V[0];
	YP[15] = V[1];
	for(ti1=1;ti1<=2;ti1++)
		for(ti2=1;ti2<=2;ti2++)
			M[(ti1-1)*3+ti2-1] = 0.;
	for(ti1=1;ti1<=2;ti1++)
		V[ti1-1] = 0.;
	Z[0] = sin(Y[30]);
	Z[1] = cos(Y[32]);
	Z[2] = cos(Y[28]);
	Z[3] = sin(Y[32]);
	Z[4] = sin(Y[28]);
	Z[5] = Z[1]*Z[2]-Z[3]*Z[4];
	Z[6] = cos(Y[30]);
	Z[2] = Z[2]*Z[3]+Z[4]*Z[1];
	Z[4] = Z[0]*Z[5];
	Z[7] = Z[4]+Z[6]*Z[2];
	Z[8] = -Z[2];
	Z[4] = Z[6]*Z[8]-Z[4];
	Z[5] = Z[6]*Z[5];
	Z[2] = Z[5]-Z[0]*Z[2];
	Z[5] = Z[0]*Z[8]+Z[5];
	M[0] = -Y[16]*(Z[2]*Z[5]-Z[7]*Z[4]);
	Z[8] = -Z[2];
	Z[9] = -Z[7];
	M[1] = Z[8]*Z[4]+Z[9]*Z[5];
	Z[10] = YP[31]+YP[33];
	Z[11] = 2.*(Y[31]+Y[29]+Y[33]);
	Z[12] = 0.5*Z[11];
	Z[13] = Z[0]*Z[1]+Z[6]*Z[3];
	Z[14] = Y[31]+Y[33];
	Z[15] = Z[6]*Z[1]-Z[3]*Z[0];
	Z[16] = YP[31]+YP[35]+YP[33];
	Z[17] = cos(Y[34]);
	Z[18] = sin(Y[34]);
	Z[19] = Z[1]*Z[17]-Z[3]*Z[18];
	Z[1] = Z[3]*Z[17]+Z[1]*Z[18];
	Z[3] = Z[0]*Z[19]+Z[6]*Z[1];
	Z[17] = Y[31]+Y[35]+Y[33];
	Z[0] = Z[6]*Z[19]-Z[0]*Z[1];
	Z[1] = Z[12]*Z[12];
	Z[6] = Z[14]*Z[14];
	Z[14] = Z[17]*Z[17];
	Z[17] = -(Z[1]*Z[2]-Z[7]*Z[10])*Y[16]+Z[11]*(Z[12]*Z[2]*Y[16]+Z[7]*Y[17])-0.25*(Z[10]*Z[13]+Z[6]*Z[15])+0.05*(Z[16]*Z[3]+Z[14]*Z[0]);
	Z[0] = -(Z[10]*Z[2]+Z[1]*Z[7])*Y[16]+Z[11]*(Z[12]*Z[7]*Y[16]-Z[2]*Y[17])+0.25*(Z[10]*Z[15]-Z[6]*Z[13])+0.05*(Z[14]*Z[3]-Z[16]*Z[0]);
	V[0] = -(Z[17]*Z[4]+Z[0]*Z[5]);
	M[4] = Z[2]*Z[8]+Z[9]*Z[7];
	V[1] = -(Z[17]*Z[2]+Z[0]*Z[7]);
	DecompCInc(2,M,3,P);
	SolveCInc(2,M,3,P,V);
	YP[29] = V[0];
	YP[17] = V[1];
}

void otp(real_T T, real_T *Y, real_T *YP)
{
	Y[108] = -Y[105];
	Y[109] = -Y[106];
	Y[110] = -Y[107];
}

void Rp(real_T T, real_T *Y, real_T *R)
{
	real_T Z[24];

	Z[0] = sin(Y[18]);
	Z[1] = cos(Y[18]);
	Z[2] = sin(Y[30]);
	Z[3] = 0.08*Z[2];
	Z[4] = Z[3]*Y[31];
	Z[5] = Z[0]*Y[6];
	Z[6] = Z[5]*Y[19]-Z[1]*Y[7]-Z[4];
	Z[7] = cos(Y[30]);
	Z[8] = 0.08*Z[7];
	Z[9] = Z[8]*Y[31];
	Z[10] = Z[1]*Y[6];
	Z[11] = Z[9]-Z[10]*Y[19]-Z[0]*Y[7];
	R[0] = Z[11]*Z[1]-Z[6]*Z[0];
	Z[10] = Z[8]-Z[10]+0.055;
	Z[5] = Z[3]-Z[5];
	R[1] = Z[5]*Z[1]-Z[10]*Z[0];
	R[2] = Z[6]*Z[1]+Z[11]*Z[0];
	R[3] = Z[10]*Z[1]+Z[0]*Z[5];
	Z[0] = sin(Y[20]);
	Z[1] = cos(Y[20]);
	Z[5] = Z[0]*Y[8];
	Z[4] = Z[5]*Y[21]-Z[1]*Y[9]-Z[4];
	Z[6] = Z[1]*Y[8];
	Z[9] = Z[9]-Z[6]*Y[21]-Z[0]*Y[9];
	R[4] = Z[9]*Z[1]-Z[4]*Z[0];
	Z[6] = Z[8]-Z[6]-0.055;
	Z[3] = Z[3]-Z[5];
	R[5] = Z[3]*Z[1]-Z[6]*Z[0];
	R[6] = Z[4]*Z[1]+Z[0]*Z[9];
	R[7] = Z[6]*Z[1]+Z[3]*Z[0];
	Z[0] = Y[31]+Y[23];
	Z[1] = cos(Y[22]);
	Z[3] = sin(Y[22]);
	Z[4] = Z[2]*Z[1]+Z[7]*Z[3];
	Z[5] = Z[1]*Z[7]-Z[2]*Z[3];
	Z[6] = Y[31]+Y[33];
	Z[8] = cos(Y[32]);
	Z[9] = sin(Y[32]);
	Z[10] = Z[2]*Z[8]+Z[9]*Z[7];
	Z[11] = 0.12*Y[31];
	Z[12] = Z[11]*Z[2];
	Z[13] = 0.03*Z[6];
	Z[14] = Z[10]*Z[13];
	Z[15] = Z[4]*Z[0]*Y[10]-Z[5]*Y[11]-Z[12]-Z[14];
	Z[16] = Z[7]*Z[8]-Z[2]*Z[9];
	Z[11] = Z[11]*Z[7];
	Z[13] = Z[13]*Z[16];
	Z[0] = Z[11]+Z[13]-Z[0]*Z[5]*Y[10]-Z[4]*Y[11];
	R[8] = Z[0]*Z[5]-Z[15]*Z[4];
	Z[17] = 0.03*Z[8];
	Z[18] = Z[17]-Z[1]*Y[10]+0.12;
	Z[19] = 0.03*Z[9];
	Z[20] = Z[19]-Z[3]*Y[10];
	R[9] = Z[20]*Z[1]-Z[3]*Z[18];
	R[10] = Z[15]*Z[5]+Z[4]*Z[0];
	R[11] = Z[1]*Z[18]+Z[20]*Z[3];
	Z[0] = Y[31]+Y[25];
	Z[1] = cos(Y[24]);
	Z[3] = sin(Y[24]);
	Z[4] = Z[2]*Z[1]+Z[7]*Z[3];
	Z[5] = Z[1]*Z[7]-Z[2]*Z[3];
	Z[12] = Z[4]*Z[0]*Y[12]+Z[14]-Z[5]*Y[13]-Z[12];
	Z[0] = Z[11]-Z[0]*Z[5]*Y[12]-Z[4]*Y[13]-Z[13];
	R[12] = Z[0]*Z[5]-Z[12]*Z[4];
	Z[11] = -(Z[1]*Y[12]+Z[17])+0.12;
	Z[13] = -(Z[3]*Y[12]+Z[19]);
	R[13] = Z[13]*Z[1]-Z[11]*Z[3];
	R[14] = Z[12]*Z[5]+Z[4]*Z[0];
	R[15] = Z[11]*Z[1]+Z[13]*Z[3];
	Z[0] = Y[31]+Y[27]+Y[33];
	Z[1] = cos(Y[26]);
	Z[3] = sin(Y[26]);
	Z[4] = Z[8]*Z[1]-Z[9]*Z[3];
	Z[5] = Z[9]*Z[1]+Z[8]*Z[3];
	Z[11] = Z[2]*Z[4];
	Z[12] = Z[11]+Z[7]*Z[5];
	Z[4] = Z[7]*Z[4];
	Z[13] = Z[4]-Z[2]*Z[5];
	Z[14] = Y[31]+Y[35]+Y[33];
	Z[15] = cos(Y[34]);
	Z[17] = sin(Y[34]);
	Z[18] = Z[8]*Z[15]-Z[9]*Z[17];
	Z[19] = Z[9]*Z[15]+Z[8]*Z[17];
	Z[20] = Z[2]*Z[18]+Z[7]*Z[19];
	Z[21] = 0.22*Z[6];
	Z[22] = 0.035*Z[14];
	Z[23] = Z[0]*Z[12]*Y[14]-Z[13]*Y[15]-Z[21]*Z[10]-Z[22]*Z[20];
	Z[5] = -Z[5];
	Z[18] = Z[7]*Z[18]-Z[2]*Z[19];
	Z[0] = Z[21]*Z[16]+Z[22]*Z[18]-Z[0]*Z[13]*Y[14]-Z[12]*Y[15];
	R[16] = Z[23]*(Z[7]*Z[5]-Z[11])+Z[0]*(Z[2]*Z[5]+Z[4]);
	Z[4] = -Z[1]*Y[14]+0.035*Z[15]+0.22;
	Z[5] = -Z[3]*Y[14]+0.035*Z[17];
	R[17] = Z[5]*Z[1]-Z[3]*Z[4];
	R[18] = Z[23]*Z[13]+Z[0]*Z[12];
	R[19] = Z[4]*Z[1]+Z[5]*Z[3];
	Z[0] = Y[31]+Y[29]+Y[33];
	Z[1] = cos(Y[28]);
	Z[3] = sin(Y[28]);
	Z[4] = Z[8]*Z[1]-Z[9]*Z[3];
	Z[5] = Z[9]*Z[1]+Z[8]*Z[3];
	Z[8] = Z[2]*Z[4];
	Z[9] = Z[8]+Z[7]*Z[5];
	Z[4] = Z[7]*Z[4];
	Z[11] = Z[4]-Z[2]*Z[5];
	Z[12] = 0.05*Z[14];
	Z[6] = 0.25*Z[6];
	Z[10] = Z[0]*Z[9]*Y[16]+Z[12]*Z[20]-Z[11]*Y[17]-Z[6]*Z[10];
	Z[5] = -Z[5];
	Z[0] = Z[6]*Z[16]-Z[11]*Z[0]*Y[16]-Z[9]*Y[17]-Z[12]*Z[18];
	R[20] = Z[10]*(Z[7]*Z[5]-Z[8])+Z[0]*(Z[2]*Z[5]+Z[4]);
	Z[2] = -Z[1]*Y[16]+0.25-0.05*Z[15];
	Z[4] = -Z[3]*Y[16]-0.05*Z[17];
	R[21] = Z[4]*Z[1]-Z[2]*Z[3];
	R[22] = Z[10]*Z[11]+Z[0]*Z[9];
	R[23] = Z[2]*Z[1]+Z[3]*Z[4];
}

void Jp(real_T T, real_T *Y, real_T *J)
{
	real_T Z[48];

	J[0] = 0.;
	J[1] = 0.;
	J[2] = 0.;
	J[3] = 0.;
	J[4] = 0.;
	J[5] = 0.;
	Z[0] = sin(Y[18]);
	Z[1] = cos(Y[18]);
	Z[2] = Z[0]*Z[0];
	Z[3] = Z[1]*Z[1];
	Z[4] = Z[3]+Z[2];
	J[6] = -Y[19]*Z[4];
	J[7] = 0.;
	J[8] = 0.;
	J[9] = 0.;
	J[10] = 0.;
	J[11] = 0.;
	J[12] = 0.;
	J[13] = 0.;
	J[14] = 0.;
	J[15] = 0.;
	J[16] = 0.;
	J[17] = 0.;
	Z[5] = Z[0]*Y[7];
	Z[6] = Z[1]*Y[6];
	Z[7] = Z[6]*Y[19];
	Z[8] = sin(Y[30]);
	Z[9] = Z[0]*Y[6];
	Z[10] = Z[9]*Y[19];
	Z[11] = 0.08*Z[8];
	Z[12] = Z[11]*Y[31];
	Z[13] = Z[1]*Y[7];
	Z[14] = cos(Y[30]);
	Z[15] = 0.08*Z[14];
	Z[16] = Z[15]*Y[31];
	J[18] = Z[12]*Z[1]-Z[16]*Z[0];
	J[19] = -Y[6]*Z[4];
	J[20] = 0.;
	J[21] = 0.;
	J[22] = 0.;
	J[23] = 0.;
	J[24] = 0.;
	J[25] = 0.;
	J[26] = 0.;
	J[27] = 0.;
	J[28] = 0.;
	J[29] = 0.;
	Z[5] = 0.08*(Z[14]*Z[0]-Z[8]*Z[1]);
	J[30] = Z[5]*Y[31];
	Z[7] = 0.08*(Z[0]*Z[8]+Z[14]*Z[1]);
	J[31] = Z[7];
	J[32] = 0.;
	J[33] = 0.;
	J[34] = 0.;
	J[35] = 0.;
	J[36] = 0.;
	J[37] = 0.;
	J[38] = 0.;
	J[39] = 0.;
	J[40] = 0.;
	J[41] = 0.;
	J[42] = 0.;
	J[43] = 0.;
	J[44] = 0.;
	J[45] = 0.;
	J[46] = 0.;
	J[47] = 0.;
	J[48] = 0.;
	J[49] = 0.;
	J[50] = 0.;
	J[51] = 0.;
	J[52] = 0.;
	J[53] = 0.;
	Z[6] = Z[15]-Z[6]+0.055;
	Z[9] = Z[11]-Z[9];
	J[54] = -(Y[6]*Z[2]+Z[6]*Z[1]+Z[3]*Y[6]+Z[0]*Z[9]);
	J[55] = 0.;
	J[56] = 0.;
	J[57] = 0.;
	J[58] = 0.;
	J[59] = 0.;
	J[60] = 0.;
	J[61] = 0.;
	J[62] = 0.;
	J[63] = 0.;
	J[64] = 0.;
	J[65] = 0.;
	J[66] = Z[7];
	J[67] = 0.;
	J[68] = 0.;
	J[69] = 0.;
	J[70] = 0.;
	J[71] = 0.;
	J[72] = 0.;
	J[73] = 0.;
	J[74] = 0.;
	J[75] = 0.;
	J[76] = 0.;
	J[77] = 0.;
	J[78] = 0.;
	Z[2] = -Z[4];
	J[79] = Z[2];
	J[80] = 0.;
	J[81] = 0.;
	J[82] = 0.;
	J[83] = 0.;
	J[84] = 0.;
	J[85] = 0.;
	J[86] = 0.;
	J[87] = 0.;
	J[88] = 0.;
	J[89] = 0.;
	J[90] = Z[0]*Z[12]+Z[16]*Z[1];
	J[91] = 0.;
	J[92] = 0.;
	J[93] = 0.;
	J[94] = 0.;
	J[95] = 0.;
	J[96] = 0.;
	J[97] = 0.;
	J[98] = 0.;
	J[99] = 0.;
	J[100] = 0.;
	J[101] = 0.;
	J[102] = -Z[7]*Y[31];
	J[103] = Z[5];
	J[104] = 0.;
	J[105] = 0.;
	J[106] = 0.;
	J[107] = 0.;
	J[108] = 0.;
	J[109] = 0.;
	J[110] = 0.;
	J[111] = 0.;
	J[112] = 0.;
	J[113] = 0.;
	J[114] = Z[2];
	J[115] = 0.;
	J[116] = 0.;
	J[117] = 0.;
	J[118] = 0.;
	J[119] = 0.;
	J[120] = 0.;
	J[121] = 0.;
	J[122] = 0.;
	J[123] = 0.;
	J[124] = 0.;
	J[125] = 0.;
	J[126] = Z[9]*Z[1]-Z[6]*Z[0];
	J[127] = 0.;
	J[128] = 0.;
	J[129] = 0.;
	J[130] = 0.;
	J[131] = 0.;
	J[132] = 0.;
	J[133] = 0.;
	J[134] = 0.;
	J[135] = 0.;
	J[136] = 0.;
	J[137] = 0.;
	J[138] = Z[5];
	J[139] = 0.;
	J[140] = 0.;
	J[141] = 0.;
	J[142] = 0.;
	J[143] = 0.;
	J[144] = 0.;
	J[145] = 0.;
	J[146] = 0.;
	J[147] = 0.;
	J[148] = 0.;
	J[149] = 0.;
	J[150] = 0.;
	J[151] = 0.;
	Z[0] = sin(Y[20]);
	Z[1] = cos(Y[20]);
	Z[2] = Z[1]*Z[1];
	Z[3] = Z[0]*Z[0];
	Z[4] = Z[3]+Z[2];
	J[152] = -Y[21]*Z[4];
	J[153] = 0.;
	J[154] = 0.;
	J[155] = 0.;
	J[156] = 0.;
	J[157] = 0.;
	J[158] = 0.;
	J[159] = 0.;
	J[160] = 0.;
	J[161] = 0.;
	J[162] = 0.;
	J[163] = 0.;
	Z[5] = Z[1]*Y[8];
	Z[6] = Z[5]*Y[21];
	Z[7] = Z[0]*Y[9];
	Z[9] = Z[1]*Y[9];
	Z[10] = Z[0]*Y[8];
	Z[13] = Z[10]*Y[21];
	J[164] = Z[12]*Z[1]-Z[16]*Z[0];
	J[165] = -Y[8]*Z[4];
	J[166] = 0.;
	J[167] = 0.;
	J[168] = 0.;
	J[169] = 0.;
	J[170] = 0.;
	J[171] = 0.;
	J[172] = 0.;
	J[173] = 0.;
	Z[6] = 0.08*(Z[14]*Z[0]-Z[8]*Z[1]);
	J[174] = Z[6]*Y[31];
	Z[7] = 0.08*(Z[0]*Z[8]+Z[14]*Z[1]);
	J[175] = Z[7];
	J[176] = 0.;
	J[177] = 0.;
	J[178] = 0.;
	J[179] = 0.;
	J[180] = 0.;
	J[181] = 0.;
	J[182] = 0.;
	J[183] = 0.;
	J[184] = 0.;
	J[185] = 0.;
	J[186] = 0.;
	J[187] = 0.;
	J[188] = 0.;
	J[189] = 0.;
	J[190] = 0.;
	J[191] = 0.;
	J[192] = 0.;
	J[193] = 0.;
	J[194] = 0.;
	J[195] = 0.;
	J[196] = 0.;
	J[197] = 0.;
	J[198] = 0.;
	J[199] = 0.;
	Z[5] = Z[15]-Z[5]-0.055;
	Z[9] = Z[11]-Z[10];
	J[200] = -(Z[3]*Y[8]+Z[5]*Z[1]+Y[8]*Z[2]+Z[0]*Z[9]);
	J[201] = 0.;
	J[202] = 0.;
	J[203] = 0.;
	J[204] = 0.;
	J[205] = 0.;
	J[206] = 0.;
	J[207] = 0.;
	J[208] = 0.;
	J[209] = 0.;
	J[210] = Z[7];
	J[211] = 0.;
	J[212] = 0.;
	J[213] = 0.;
	J[214] = 0.;
	J[215] = 0.;
	J[216] = 0.;
	J[217] = 0.;
	J[218] = 0.;
	J[219] = 0.;
	J[220] = 0.;
	J[221] = 0.;
	J[222] = 0.;
	J[223] = 0.;
	J[224] = 0.;
	Z[2] = -Z[4];
	J[225] = Z[2];
	J[226] = 0.;
	J[227] = 0.;
	J[228] = 0.;
	J[229] = 0.;
	J[230] = 0.;
	J[231] = 0.;
	J[232] = 0.;
	J[233] = 0.;
	J[234] = 0.;
	J[235] = 0.;
	J[236] = Z[0]*Z[12]+Z[16]*Z[1];
	J[237] = 0.;
	J[238] = 0.;
	J[239] = 0.;
	J[240] = 0.;
	J[241] = 0.;
	J[242] = 0.;
	J[243] = 0.;
	J[244] = 0.;
	J[245] = 0.;
	J[246] = -Z[7]*Y[31];
	J[247] = Z[6];
	J[248] = 0.;
	J[249] = 0.;
	J[250] = 0.;
	J[251] = 0.;
	J[252] = 0.;
	J[253] = 0.;
	J[254] = 0.;
	J[255] = 0.;
	J[256] = 0.;
	J[257] = 0.;
	J[258] = 0.;
	J[259] = 0.;
	J[260] = Z[2];
	J[261] = 0.;
	J[262] = 0.;
	J[263] = 0.;
	J[264] = 0.;
	J[265] = 0.;
	J[266] = 0.;
	J[267] = 0.;
	J[268] = 0.;
	J[269] = 0.;
	J[270] = 0.;
	J[271] = 0.;
	J[272] = Z[9]*Z[1]-Z[0]*Z[5];
	J[273] = 0.;
	J[274] = 0.;
	J[275] = 0.;
	J[276] = 0.;
	J[277] = 0.;
	J[278] = 0.;
	J[279] = 0.;
	J[280] = 0.;
	J[281] = 0.;
	J[282] = Z[6];
	J[283] = 0.;
	J[284] = 0.;
	J[285] = 0.;
	J[286] = 0.;
	J[287] = 0.;
	J[288] = 0.;
	J[289] = 0.;
	J[290] = 0.;
	J[291] = 0.;
	J[292] = 0.;
	J[293] = 0.;
	J[294] = 0.;
	J[295] = 0.;
	J[296] = 0.;
	J[297] = 0.;
	Z[0] = Y[31]+Y[23];
	Z[1] = cos(Y[22]);
	Z[2] = sin(Y[22]);
	Z[3] = Z[8]*Z[1]+Z[14]*Z[2];
	Z[4] = -Z[3];
	Z[5] = Z[14]*Z[1]-Z[2]*Z[8];
	Z[6] = Z[3]*Z[4];
	Z[7] = Z[6]-Z[5]*Z[5];
	J[298] = Z[0]*Z[7];
	J[299] = 0.;
	J[300] = 0.;
	J[301] = 0.;
	J[302] = 0.;
	J[303] = 0.;
	J[304] = 0.;
	J[305] = 0.;
	J[306] = 0.;
	J[307] = 0.;
	J[308] = 0.;
	J[309] = 0.;
	Z[9] = Z[5]*Y[10];
	Z[10] = Z[0]*Z[9];
	Z[11] = Z[4]*Y[11];
	Z[12] = Y[31]+Y[33];
	Z[13] = cos(Y[32]);
	Z[15] = sin(Y[32]);
	Z[16] = Z[8]*Z[13]+Z[14]*Z[15];
	Z[17] = 0.03*Z[16];
	Z[18] = Z[17]*Z[12];
	Z[19] = 0.12*Z[8];
	Z[20] = Z[19]*Y[31];
	Z[21] = Z[5]*Y[11];
	Z[22] = Z[3]*Y[10];
	Z[23] = Z[22]*Z[0]-Z[21]-Z[20]-Z[18];
	Z[0] = Z[4]*Z[0]*Y[10];
	Z[24] = -(Z[0]+Z[21]);
	Z[25] = Z[14]*Z[13]-Z[8]*Z[15];
	Z[26] = 0.03*Z[25];
	Z[27] = Z[26]*Z[12];
	Z[28] = 0.12*Z[14];
	Z[29] = Z[28]*Y[31];
	Z[30] = Z[29]+Z[27]-Z[10]-Z[3]*Y[11];
	Z[31] = Z[10]+Z[30]-Z[11];
	Z[32] = -Z[23]*Z[5];
	J[310] = Z[31]*Z[4]+Z[32]+Z[24]*Z[5];
	J[311] = Y[10]*Z[7];
	J[312] = 0.;
	J[313] = 0.;
	J[314] = 0.;
	J[315] = 0.;
	J[316] = 0.;
	J[317] = 0.;
	Z[7] = -Z[16];
	Z[33] = 0.03*Z[12];
	Z[34] = Z[33]*Z[7];
	Z[0] = Z[34]-Z[0]-Z[21]-Z[20];
	Z[10] = Z[10]+Z[30]-Z[11]-Z[29]-Z[27];
	J[318] = Z[10]*Z[4]+Z[32]+Z[0]*Z[5];
	Z[11] = Z[22]-Z[17]-Z[19];
	Z[9] = Z[26]+Z[28]-Z[9];
	J[319] = Z[11]*Z[4]+Z[9]*Z[5];
	J[320] = -Z[33]*(Z[25]*Z[4]-Z[7]*Z[5]);
	Z[21] = -Z[17];
	J[321] = Z[21]*Z[4]+Z[26]*Z[5];
	J[322] = 0.;
	J[323] = 0.;
	J[324] = 0.;
	J[325] = 0.;
	J[326] = 0.;
	J[327] = 0.;
	J[328] = 0.;
	J[329] = 0.;
	J[330] = 0.;
	J[331] = 0.;
	J[332] = 0.;
	J[333] = 0.;
	J[334] = 0.;
	J[335] = 0.;
	J[336] = 0.;
	J[337] = 0.;
	J[338] = 0.;
	J[339] = 0.;
	J[340] = 0.;
	J[341] = 0.;
	J[342] = 0.;
	J[343] = 0.;
	J[344] = 0.;
	J[345] = 0.;
	Z[22] = 0.03*Z[13];
	Z[30] = Z[22]-Z[1]*Y[10]+0.12;
	Z[32] = 0.03*Z[15];
	Z[35] = Z[32]-Z[2]*Y[10];
	Z[36] = Z[2]*Z[2];
	Z[37] = Z[1]*Z[1];
	J[346] = -(Z[36]*Y[10]+Z[30]*Z[1]+Z[37]*Y[10]+Z[35]*Z[2]);
	J[347] = 0.;
	J[348] = 0.;
	J[349] = 0.;
	J[350] = 0.;
	J[351] = 0.;
	J[352] = 0.;
	J[353] = 0.;
	J[354] = 0.;
	J[355] = 0.;
	J[356] = 0.03*(Z[15]*Z[2]+Z[13]*Z[1]);
	J[357] = 0.;
	J[358] = 0.;
	J[359] = 0.;
	J[360] = 0.;
	J[361] = 0.;
	J[362] = 0.;
	J[363] = 0.;
	J[364] = 0.;
	J[365] = 0.;
	J[366] = 0.;
	J[367] = 0.;
	J[368] = 0.;
	J[369] = 0.;
	J[370] = 0.;
	J[371] = Z[6]-Z[5]*Z[5];
	J[372] = 0.;
	J[373] = 0.;
	J[374] = 0.;
	J[375] = 0.;
	J[376] = 0.;
	J[377] = 0.;
	J[378] = 0.;
	J[379] = 0.;
	J[380] = 0.;
	J[381] = 0.;
	Z[4] = Z[23]*Z[4];
	J[382] = Z[31]*Z[5]+Z[4]+Z[24]*Z[3];
	J[383] = 0.;
	J[384] = 0.;
	J[385] = 0.;
	J[386] = 0.;
	J[387] = 0.;
	J[388] = 0.;
	J[389] = 0.;
	J[390] = Z[10]*Z[5]+Z[4]+Z[3]*Z[0];
	J[391] = Z[5]*Z[11]+Z[9]*Z[3];
	J[392] = Z[33]*(Z[7]*Z[3]-Z[25]*Z[5]);
	J[393] = Z[21]*Z[5]+Z[26]*Z[3];
	J[394] = 0.;
	J[395] = 0.;
	J[396] = 0.;
	J[397] = 0.;
	J[398] = 0.;
	J[399] = 0.;
	J[400] = 0.;
	J[401] = 0.;
	J[402] = 0.;
	J[403] = 0.;
	J[404] = 0.;
	J[405] = 0.;
	J[406] = -(Z[37]+Z[36]);
	J[407] = 0.;
	J[408] = 0.;
	J[409] = 0.;
	J[410] = 0.;
	J[411] = 0.;
	J[412] = 0.;
	J[413] = 0.;
	J[414] = 0.;
	J[415] = 0.;
	J[416] = 0.;
	J[417] = 0.;
	J[418] = Z[35]*Z[1]-Z[30]*Z[2];
	J[419] = 0.;
	J[420] = 0.;
	J[421] = 0.;
	J[422] = 0.;
	J[423] = 0.;
	J[424] = 0.;
	J[425] = 0.;
	J[426] = 0.;
	J[427] = 0.;
	J[428] = 0.03*(Z[13]*Z[2]-Z[1]*Z[15]);
	J[429] = 0.;
	J[430] = 0.;
	J[431] = 0.;
	J[432] = 0.;
	J[433] = 0.;
	J[434] = 0.;
	J[435] = 0.;
	J[436] = 0.;
	J[437] = 0.;
	J[438] = 0.;
	J[439] = 0.;
	J[440] = 0.;
	J[441] = 0.;
	J[442] = 0.;
	J[443] = 0.;
	Z[0] = Y[31]+Y[25];
	Z[1] = cos(Y[24]);
	Z[2] = sin(Y[24]);
	Z[3] = Z[8]*Z[1]+Z[14]*Z[2];
	Z[4] = -Z[3];
	Z[5] = Z[14]*Z[1]-Z[2]*Z[8];
	Z[6] = Z[3]*Z[4];
	Z[9] = Z[6]-Z[5]*Z[5];
	J[444] = Z[0]*Z[9];
	J[445] = 0.;
	J[446] = 0.;
	J[447] = 0.;
	J[448] = 0.;
	J[449] = 0.;
	J[450] = 0.;
	J[451] = 0.;
	J[452] = 0.;
	J[453] = 0.;
	J[454] = 0.;
	J[455] = 0.;
	Z[10] = Z[4]*Y[13];
	Z[11] = Z[5]*Y[12];
	Z[21] = Z[11]*Z[0];
	Z[23] = Z[5]*Y[13];
	Z[24] = Z[3]*Y[12];
	Z[18] = Z[24]*Z[0]+Z[18]-Z[23]-Z[20];
	Z[0] = Z[4]*Z[0]*Y[12];
	Z[30] = -(Z[0]+Z[23]);
	Z[31] = Z[29]-Z[21]-Z[3]*Y[13]-Z[27];
	Z[35] = Z[21]+Z[31]-Z[10];
	Z[36] = -Z[18]*Z[5];
	J[456] = Z[35]*Z[4]+Z[36]+Z[30]*Z[5];
	J[457] = Y[12]*Z[9];
	J[458] = 0.;
	J[459] = 0.;
	J[460] = 0.;
	J[461] = 0.;
	Z[0] = -(Z[0]+Z[23]+Z[20]+Z[34]);
	Z[9] = Z[21]+Z[27]+Z[31]-Z[10]-Z[29];
	J[462] = Z[9]*Z[4]+Z[36]+Z[0]*Z[5];
	Z[10] = Z[17]+Z[24]-Z[19];
	Z[11] = Z[28]-Z[26]-Z[11];
	J[463] = Z[10]*Z[4]+Z[5]*Z[11];
	J[464] = Z[33]*(Z[25]*Z[4]-Z[7]*Z[5]);
	Z[19] = -Z[26];
	J[465] = Z[17]*Z[4]+Z[5]*Z[19];
	J[466] = 0.;
	J[467] = 0.;
	J[468] = 0.;
	J[469] = 0.;
	J[470] = 0.;
	J[471] = 0.;
	J[472] = 0.;
	J[473] = 0.;
	J[474] = 0.;
	J[475] = 0.;
	J[476] = 0.;
	J[477] = 0.;
	J[478] = 0.;
	J[479] = 0.;
	J[480] = 0.;
	J[481] = 0.;
	J[482] = 0.;
	J[483] = 0.;
	J[484] = 0.;
	J[485] = 0.;
	J[486] = 0.;
	J[487] = 0.;
	J[488] = 0.;
	J[489] = 0.;
	J[490] = 0.;
	J[491] = 0.;
	Z[20] = -(Z[1]*Y[12]+Z[22])+0.12;
	Z[21] = -(Z[2]*Y[12]+Z[32]);
	Z[22] = Z[2]*Z[2];
	Z[23] = Z[1]*Z[1];
	J[492] = -(Z[22]*Y[12]+Z[20]*Z[1]+Z[23]*Y[12]+Z[21]*Z[2]);
	J[493] = 0.;
	J[494] = 0.;
	J[495] = 0.;
	J[496] = 0.;
	J[497] = 0.;
	J[498] = 0.;
	J[499] = 0.;
	J[500] = -0.03*(Z[15]*Z[2]+Z[13]*Z[1]);
	J[501] = 0.;
	J[502] = 0.;
	J[503] = 0.;
	J[504] = 0.;
	J[505] = 0.;
	J[506] = 0.;
	J[507] = 0.;
	J[508] = 0.;
	J[509] = 0.;
	J[510] = 0.;
	J[511] = 0.;
	J[512] = 0.;
	J[513] = 0.;
	J[514] = 0.;
	J[515] = 0.;
	J[516] = 0.;
	J[517] = Z[6]-Z[5]*Z[5];
	J[518] = 0.;
	J[519] = 0.;
	J[520] = 0.;
	J[521] = 0.;
	J[522] = 0.;
	J[523] = 0.;
	J[524] = 0.;
	J[525] = 0.;
	J[526] = 0.;
	J[527] = 0.;
	Z[4] = Z[18]*Z[4];
	J[528] = Z[35]*Z[5]+Z[4]+Z[30]*Z[3];
	J[529] = 0.;
	J[530] = 0.;
	J[531] = 0.;
	J[532] = 0.;
	J[533] = 0.;
	J[534] = Z[9]*Z[5]+Z[4]+Z[3]*Z[0];
	J[535] = Z[10]*Z[5]+Z[11]*Z[3];
	J[536] = -Z[33]*(Z[7]*Z[3]-Z[25]*Z[5]);
	J[537] = Z[17]*Z[5]+Z[19]*Z[3];
	J[538] = 0.;
	J[539] = 0.;
	J[540] = 0.;
	J[541] = 0.;
	J[542] = 0.;
	J[543] = 0.;
	J[544] = 0.;
	J[545] = 0.;
	J[546] = 0.;
	J[547] = 0.;
	J[548] = 0.;
	J[549] = 0.;
	J[550] = 0.;
	J[551] = 0.;
	J[552] = -(Z[23]+Z[22]);
	J[553] = 0.;
	J[554] = 0.;
	J[555] = 0.;
	J[556] = 0.;
	J[557] = 0.;
	J[558] = 0.;
	J[559] = 0.;
	J[560] = 0.;
	J[561] = 0.;
	J[562] = 0.;
	J[563] = 0.;
	J[564] = Z[21]*Z[1]-Z[20]*Z[2];
	J[565] = 0.;
	J[566] = 0.;
	J[567] = 0.;
	J[568] = 0.;
	J[569] = 0.;
	J[570] = 0.;
	J[571] = 0.;
	J[572] = 0.03*(Z[1]*Z[15]-Z[13]*Z[2]);
	J[573] = 0.;
	J[574] = 0.;
	J[575] = 0.;
	J[576] = 0.;
	J[577] = 0.;
	J[578] = 0.;
	J[579] = 0.;
	J[580] = 0.;
	J[581] = 0.;
	J[582] = 0.;
	J[583] = 0.;
	J[584] = 0.;
	J[585] = 0.;
	J[586] = 0.;
	J[587] = 0.;
	J[588] = 0.;
	J[589] = 0.;
	Z[0] = Y[31]+Y[27]+Y[33];
	Z[1] = cos(Y[26]);
	Z[2] = sin(Y[26]);
	Z[3] = Z[13]*Z[1]-Z[15]*Z[2];
	Z[4] = Z[1]*Z[15]+Z[13]*Z[2];
	Z[5] = Z[8]*Z[3];
	Z[6] = Z[5]+Z[14]*Z[4];
	Z[9] = -Z[4];
	Z[10] = Z[14]*Z[9];
	Z[5] = Z[10]-Z[5];
	Z[11] = Z[14]*Z[3];
	Z[4] = Z[11]-Z[8]*Z[4];
	Z[9] = Z[9]*Z[8];
	Z[11] = Z[9]+Z[11];
	Z[17] = Z[6]*Z[5]-Z[11]*Z[4];
	J[590] = Z[0]*Z[17];
	Z[18] = -Z[4];
	Z[19] = -Z[6];
	J[591] = Z[18]*Z[5]+Z[19]*Z[11];
	J[592] = 0.;
	J[593] = 0.;
	J[594] = 0.;
	J[595] = 0.;
	J[596] = 0.;
	J[597] = 0.;
	J[598] = 0.;
	J[599] = 0.;
	J[600] = 0.;
	J[601] = 0.;
	Z[20] = Z[5]*Y[15];
	Z[21] = Z[11]*Z[0]*Y[14];
	Z[22] = Z[21]-Z[20];
	Z[23] = Y[31]+Y[35]+Y[33];
	Z[24] = cos(Y[34]);
	Z[26] = sin(Y[34]);
	Z[27] = Z[13]*Z[24]-Z[15]*Z[26];
	Z[28] = Z[15]*Z[24]+Z[13]*Z[26];
	Z[29] = Z[8]*Z[27];
	Z[30] = Z[29]+Z[14]*Z[28];
	Z[31] = Z[4]*Y[15];
	Z[32] = Z[6]*Y[14];
	Z[33] = 0.035*Z[30];
	Z[34] = 0.22*Z[16];
	Z[35] = Z[32]*Z[0]-Z[31]-Z[34]*Z[12]-Z[33]*Z[23];
	Z[3] = -Z[3];
	Z[36] = Z[11]*Y[15];
	Z[37] = Z[0]*Z[5]*Y[14];
	Z[38] = -(Z[37]+Z[36]);
	Z[39] = Z[14]*Z[27];
	Z[40] = Z[39]-Z[28]*Z[8];
	Z[41] = 0.22*Z[12];
	Z[42] = Z[41]*Z[25];
	Z[43] = 0.035*Z[40];
	Z[44] = Z[43]*Z[23];
	Z[45] = Z[4]*Y[14];
	Z[46] = Z[45]*Z[0];
	Z[47] = Z[42]+Z[44]-Z[46]-Z[6]*Y[15];
	Z[10] = Z[47]*(Z[8]*Z[3]+Z[10]);
	Z[3] = Z[35]*(Z[14]*Z[3]-Z[9]);
	J[602] = Z[22]*Z[5]+Z[3]+Z[38]*Z[11]+Z[10];
	J[603] = Y[14]*Z[17];
	J[604] = 0.;
	J[605] = 0.;
	Z[9] = -Z[30];
	Z[17] = Z[41]*Z[7];
	Z[41] = 0.035*Z[23];
	Z[0] = Z[17]+Z[41]*Z[9]-Z[0]*Z[19]*Y[14]-Z[31];
	Z[31] = Z[46]+Z[47]-Z[19]*Y[15]-Z[42]-Z[44];
	J[606] = Z[31]*Z[5]+Z[11]*Z[0]-Z[35]*Z[11];
	Z[32] = Z[32]-Z[34]-Z[33];
	Z[27] = -0.005*(7.*Z[28]+44.*Z[15])*Z[8]+0.005*(7.*Z[27]+44.*Z[13])*Z[14]-Z[45];
	Z[34] = Z[32]*Z[5]+Z[27]*Z[11];
	J[607] = Z[34];
	Z[28] = -Z[28];
	Z[39] = Z[28]*Z[8]+Z[39];
	Z[20] = Z[21]-Z[20]-Z[42]-Z[41]*Z[39];
	Z[21] = Z[14]*Z[28]-Z[29];
	Z[17] = Z[17]+Z[41]*Z[21]-Z[37]-Z[36];
	J[608] = Z[5]*Z[20]+Z[3]+Z[17]*Z[11]+Z[10];
	J[609] = Z[34];
	J[610] = -Z[41]*(Z[39]*Z[5]-Z[21]*Z[11]);
	Z[3] = -Z[33];
	J[611] = Z[5]*Z[3]+Z[43]*Z[11];
	J[612] = 0.;
	J[613] = 0.;
	J[614] = 0.;
	J[615] = 0.;
	J[616] = 0.;
	J[617] = 0.;
	J[618] = 0.;
	J[619] = 0.;
	J[620] = 0.;
	J[621] = 0.;
	J[622] = 0.;
	J[623] = 0.;
	J[624] = 0.;
	J[625] = 0.;
	J[626] = 0.;
	J[627] = 0.;
	J[628] = 0.;
	J[629] = 0.;
	J[630] = 0.;
	J[631] = 0.;
	J[632] = 0.;
	J[633] = 0.;
	J[634] = 0.;
	J[635] = 0.;
	J[636] = 0.;
	J[637] = 0.;
	Z[10] = -Z[1]*Y[14]+0.035*Z[24]+0.22;
	Z[28] = -Z[2]*Y[14]+0.035*Z[26];
	Z[29] = Z[2]*Z[2];
	Z[33] = Z[1]*Z[1];
	J[638] = -(Z[29]*Y[14]+Z[10]*Z[1]+Z[33]*Y[14]+Z[28]*Z[2]);
	J[639] = 0.;
	J[640] = 0.;
	J[641] = 0.;
	J[642] = 0.;
	J[643] = 0.;
	J[644] = 0.;
	J[645] = 0.;
	J[646] = 0.035*(Z[26]*Z[2]+Z[24]*Z[1]);
	J[647] = 0.;
	J[648] = 0.;
	J[649] = 0.;
	J[650] = 0.;
	J[651] = 0.;
	J[652] = 0.;
	J[653] = 0.;
	J[654] = 0.;
	J[655] = 0.;
	J[656] = 0.;
	J[657] = 0.;
	J[658] = 0.;
	J[659] = 0.;
	J[660] = 0.;
	J[661] = 0.;
	J[662] = 0.;
	J[663] = Z[18]*Z[4]+Z[6]*Z[19];
	J[664] = 0.;
	J[665] = 0.;
	J[666] = 0.;
	J[667] = 0.;
	J[668] = 0.;
	J[669] = 0.;
	J[670] = 0.;
	J[671] = 0.;
	J[672] = 0.;
	J[673] = 0.;
	Z[5] = Z[35]*Z[5];
	Z[11] = Z[47]*Z[11];
	J[674] = Z[22]*Z[4]+Z[5]+Z[38]*Z[6]+Z[11];
	J[675] = 0.;
	J[676] = 0.;
	J[677] = 0.;
	J[678] = Z[31]*Z[4]+Z[35]*Z[19]+Z[6]*Z[0];
	Z[0] = Z[32]*Z[4]+Z[27]*Z[6];
	J[679] = Z[0];
	J[680] = Z[20]*Z[4]+Z[5]+Z[17]*Z[6]+Z[11];
	J[681] = Z[0];
	J[682] = -Z[41]*(Z[39]*Z[4]-Z[21]*Z[6]);
	J[683] = Z[3]*Z[4]+Z[43]*Z[6];
	J[684] = 0.;
	J[685] = 0.;
	J[686] = 0.;
	J[687] = 0.;
	J[688] = 0.;
	J[689] = 0.;
	J[690] = 0.;
	J[691] = 0.;
	J[692] = 0.;
	J[693] = 0.;
	J[694] = 0.;
	J[695] = 0.;
	J[696] = 0.;
	J[697] = 0.;
	J[698] = -(Z[33]+Z[29]);
	J[699] = 0.;
	J[700] = 0.;
	J[701] = 0.;
	J[702] = 0.;
	J[703] = 0.;
	J[704] = 0.;
	J[705] = 0.;
	J[706] = 0.;
	J[707] = 0.;
	J[708] = 0.;
	J[709] = 0.;
	J[710] = Z[28]*Z[1]-Z[10]*Z[2];
	J[711] = 0.;
	J[712] = 0.;
	J[713] = 0.;
	J[714] = 0.;
	J[715] = 0.;
	J[716] = 0.;
	J[717] = 0.;
	J[718] = 0.035*(Z[24]*Z[2]-Z[26]*Z[1]);
	J[719] = 0.;
	J[720] = 0.;
	J[721] = 0.;
	J[722] = 0.;
	J[723] = 0.;
	J[724] = 0.;
	J[725] = 0.;
	J[726] = 0.;
	J[727] = 0.;
	J[728] = 0.;
	J[729] = 0.;
	J[730] = 0.;
	J[731] = 0.;
	J[732] = 0.;
	J[733] = 0.;
	J[734] = 0.;
	J[735] = 0.;
	Z[0] = Y[31]+Y[29]+Y[33];
	Z[1] = cos(Y[28]);
	Z[2] = sin(Y[28]);
	Z[3] = Z[13]*Z[1]-Z[15]*Z[2];
	Z[4] = Z[1]*Z[15]+Z[13]*Z[2];
	Z[5] = Z[8]*Z[3];
	Z[6] = Z[5]+Z[14]*Z[4];
	Z[10] = -Z[4];
	Z[11] = Z[14]*Z[10];
	Z[5] = Z[11]-Z[5];
	Z[13] = Z[14]*Z[3];
	Z[4] = Z[13]-Z[8]*Z[4];
	Z[10] = Z[8]*Z[10];
	Z[13] = Z[10]+Z[13];
	Z[15] = Z[6]*Z[5]-Z[13]*Z[4];
	J[736] = Z[0]*Z[15];
	Z[17] = -Z[4];
	Z[18] = -Z[6];
	J[737] = Z[17]*Z[5]+Z[18]*Z[13];
	J[738] = 0.;
	J[739] = 0.;
	J[740] = 0.;
	J[741] = 0.;
	J[742] = 0.;
	J[743] = 0.;
	J[744] = 0.;
	J[745] = 0.;
	J[746] = 0.;
	J[747] = 0.;
	Z[19] = Z[5]*Y[17];
	Z[20] = Z[0]*Z[13]*Y[16];
	Z[22] = Z[20]-Z[19];
	Z[27] = Z[4]*Y[17];
	Z[28] = Z[6]*Y[16];
	Z[29] = 0.05*Z[30];
	Z[16] = 0.25*Z[16];
	Z[30] = Z[28]*Z[0]+Z[29]*Z[23]-Z[27]-Z[16]*Z[12];
	Z[3] = -Z[3];
	Z[31] = Z[13]*Y[17];
	Z[32] = Z[0]*Z[5]*Y[16];
	Z[33] = -(Z[32]+Z[31]);
	Z[25] = 0.25*Z[25];
	Z[34] = Z[25]*Z[12];
	Z[35] = 0.05*Z[40];
	Z[36] = Z[35]*Z[23];
	Z[37] = Z[4]*Y[16];
	Z[38] = Z[37]*Z[0];
	Z[40] = Z[34]-Z[38]-Z[6]*Y[17]-Z[36];
	Z[10] = Z[30]*(Z[14]*Z[3]-Z[10]);
	Z[3] = Z[40]*(Z[8]*Z[3]+Z[11]);
	J[748] = Z[22]*Z[5]+Z[10]+Z[33]*Z[13]+Z[3];
	J[749] = Y[16]*Z[15];
	Z[7] = 0.25*Z[12]*Z[7];
	Z[8] = 0.05*Z[23];
	Z[0] = Z[7]-Z[0]*Z[18]*Y[16]-Z[27]-Z[9]*Z[8];
	Z[9] = Z[38]+Z[36]+Z[40]-Z[18]*Y[17]-Z[34];
	J[750] = Z[9]*Z[5]+Z[0]*Z[13]-Z[30]*Z[13];
	Z[11] = Z[29]+Z[28]-Z[16];
	Z[12] = Z[25]-Z[35]-Z[37];
	Z[14] = Z[5]*Z[11]+Z[12]*Z[13];
	J[751] = Z[14];
	Z[15] = Z[20]+Z[8]*Z[39]-Z[19]-Z[34];
	Z[7] = Z[7]-Z[32]-Z[31]-Z[8]*Z[21];
	J[752] = Z[15]*Z[5]+Z[10]+Z[7]*Z[13]+Z[3];
	J[753] = Z[14];
	J[754] = Z[8]*(Z[39]*Z[5]-Z[21]*Z[13]);
	Z[3] = -Z[35];
	J[755] = Z[29]*Z[5]+Z[13]*Z[3];
	J[756] = 0.;
	J[757] = 0.;
	J[758] = 0.;
	J[759] = 0.;
	J[760] = 0.;
	J[761] = 0.;
	J[762] = 0.;
	J[763] = 0.;
	J[764] = 0.;
	J[765] = 0.;
	J[766] = 0.;
	J[767] = 0.;
	J[768] = 0.;
	J[769] = 0.;
	J[770] = 0.;
	J[771] = 0.;
	J[772] = 0.;
	J[773] = 0.;
	J[774] = 0.;
	J[775] = 0.;
	J[776] = 0.;
	J[777] = 0.;
	J[778] = 0.;
	J[779] = 0.;
	J[780] = 0.;
	J[781] = 0.;
	J[782] = 0.;
	J[783] = 0.;
	Z[10] = -Z[1]*Y[16]+0.25-0.05*Z[24];
	Z[14] = -Z[2]*Y[16]-0.05*Z[26];
	Z[16] = Z[2]*Z[2];
	Z[19] = Z[1]*Z[1];
	J[784] = -(Z[16]*Y[16]+Z[10]*Z[1]+Z[19]*Y[16]+Z[14]*Z[2]);
	J[785] = 0.;
	J[786] = 0.;
	J[787] = 0.;
	J[788] = 0.;
	J[789] = 0.;
	J[790] = -0.05*(Z[26]*Z[2]+Z[24]*Z[1]);
	J[791] = 0.;
	J[792] = 0.;
	J[793] = 0.;
	J[794] = 0.;
	J[795] = 0.;
	J[796] = 0.;
	J[797] = 0.;
	J[798] = 0.;
	J[799] = 0.;
	J[800] = 0.;
	J[801] = 0.;
	J[802] = 0.;
	J[803] = 0.;
	J[804] = 0.;
	J[805] = 0.;
	J[806] = 0.;
	J[807] = 0.;
	J[808] = 0.;
	J[809] = Z[17]*Z[4]+Z[18]*Z[6];
	J[810] = 0.;
	J[811] = 0.;
	J[812] = 0.;
	J[813] = 0.;
	J[814] = 0.;
	J[815] = 0.;
	J[816] = 0.;
	J[817] = 0.;
	J[818] = 0.;
	J[819] = 0.;
	Z[5] = Z[30]*Z[5];
	Z[13] = Z[40]*Z[13];
	J[820] = Z[22]*Z[4]+Z[5]+Z[33]*Z[6]+Z[13];
	J[821] = 0.;
	J[822] = Z[9]*Z[4]+Z[30]*Z[18]+Z[6]*Z[0];
	Z[0] = Z[11]*Z[4]+Z[12]*Z[6];
	J[823] = Z[0];
	J[824] = Z[15]*Z[4]+Z[5]+Z[6]*Z[7]+Z[13];
	J[825] = Z[0];
	J[826] = Z[8]*(Z[39]*Z[4]-Z[21]*Z[6]);
	J[827] = Z[29]*Z[4]+Z[6]*Z[3];
	J[828] = 0.;
	J[829] = 0.;
	J[830] = 0.;
	J[831] = 0.;
	J[832] = 0.;
	J[833] = 0.;
	J[834] = 0.;
	J[835] = 0.;
	J[836] = 0.;
	J[837] = 0.;
	J[838] = 0.;
	J[839] = 0.;
	J[840] = 0.;
	J[841] = 0.;
	J[842] = 0.;
	J[843] = 0.;
	J[844] = -(Z[19]+Z[16]);
	J[845] = 0.;
	J[846] = 0.;
	J[847] = 0.;
	J[848] = 0.;
	J[849] = 0.;
	J[850] = 0.;
	J[851] = 0.;
	J[852] = 0.;
	J[853] = 0.;
	J[854] = 0.;
	J[855] = 0.;
	J[856] = Z[14]*Z[1]-Z[10]*Z[2];
	J[857] = 0.;
	J[858] = 0.;
	J[859] = 0.;
	J[860] = 0.;
	J[861] = 0.;
	J[862] = 0.05*(Z[26]*Z[1]-Z[24]*Z[2]);
	J[863] = 0.;
}

/*
	Projection: Use Rp,Jp constraint residual and Jacobian functions to
	project the input solution x back onto the constraint manfold.

	Return codes:
	0 - Successful completion
	1 - Entry of Residual or Jacobian is undefined/infinity
	2 - Row of Jacobian is zero, but residual is nonzero
	3 - Iteration limit reached
*/
static int_T Projection(
	real_T t,		/* Current time */
	real_T *x,		/* Current solution (updated) */
	real_T tol,		/* Tolerance limit for iteration */
	int_T maxiter	/* Max iteration limit */
)
{
	int_T i, j, k, r, c, iter, nc2, ip[NCON],per[NDIFF];
	real_T scl, resmag, val, val2, R[NCON],J[NCON*NDIFF],A[NCON*NCON],iA[NCON*NCON];

	for(iter=0;iter<maxiter;iter++) {

		/* Compute the Jacobian and Residual at the current solution */
		Rp(t, x, R);
		Jp(t, x, J);

		/* Rescale rows of Jacobian so that maximum coeff is 1, validating */
		resmag = 0.0;
		for(i=0;i<NCON;i++) {
			if( R[i]-R[i]!=0.0 ) return(1);
			val = 0.0;
			for(j=0;j<NDIFF;j++) {
				if( J[i*NDIFF+j]-J[i*NDIFF+j]!=0.0 ) return(1);
				val2 = fabs(J[i*NDIFF+j]);
				if( val2>val ) val = val2;
			}
			if( val==0. ) {
				if( R[i]!=0. )
					return(2);
			}
			else {
				val = 1.0/val;
				for(j=0;j<NDIFF;j++) J[i*NDIFF+j] *= val;
				R[i] *= val;
				resmag += R[i]*R[i];
			}
		}

		/* Compute J_hat from J
			The solving process will select the row with the largest residual,
			then choose the largest coeff, computing an approx.  of the condition
			as we go, stopping when the condition becomes too poor. */
		for(i=0;i<NDIFF;i++) per[i]=i;
		nc2 = NCON;
		scl = 1.0;
		i = 0;
		while( i<nc2 ) {
			/* Search for row with largest residual */
			resmag = fabs(R[i]); r = i;
			for(j=i+1;j<nc2;j++) {
				val2 = fabs(R[j]);
				if( val2>resmag ) { resmag = val2; r = j; }
			}
			/* Check for termination on the first row of this iteration */
			if( i==0 && ( resmag<=tol || iter>=maxiter )) {
				nc2 = NDIFF+1; break;
			}

			/* Row 'r' has largest residual 'val', locate column with
				largest coeff */
			val = fabs(J[r*NDIFF+i]); c = i;
			for(j=i+1;j<NDIFF;j++) {
				val2 = fabs(J[r*NDIFF+j]);
				if( val2>val ) { val = val2; c = j; }
			}

			if( scl*val<sqrt(tol) )  {
				/* Coefficient is too small - remove row */
				if( r!=nc2-1 ) {
					for(j=0;j<NDIFF;j++) J[r*NDIFF+j] = J[(nc2-1)*NDIFF+j];
					R[r] = R[nc2-1];
				}
				nc2--;
			}
			else {
				/* Adjust condition estimate */
				scl *= val;
				/* Row/Column exchanges */
				if( c!=i ) {
					for(j=0;j<nc2;j++) { val=J[j*NDIFF+i]; J[j*NDIFF+i]=J[j*NDIFF+c]; J[j*NDIFF+c]=val; }
					j=per[i]; per[i]=per[c]; per[c]=j;
				}
				if( r!=i ) {
					for(j=i;j<NDIFF;j++) { val=J[i*NDIFF+j]; J[i*NDIFF+j]=J[r*NDIFF+j]; J[r*NDIFF+j]=val; }
					val=R[i]; R[i]=R[r]; R[r]=val;
				}
				/* Rescale if necessary */
				if( J[i*NDIFF+i]!=1.0 ) {
					val = 1.0/J[i*NDIFF+i]; 
					J[i*NDIFF+i] = 1.0;
					for(j=i+1;j<NDIFF;j++) J[i*NDIFF+j] = J[i*NDIFF+j]*val;
					R[i] *= val;
				}
				/* Backsub */
				for(r=0;r<nc2;r++)
					if( r!=i && J[r*NDIFF+i]!=0.0 ) {
						for(c=i+1;c<NDIFF;c++) J[r*NDIFF+c] -= J[r*NDIFF+i]*J[i*NDIFF+c];
						R[r] -= J[r*NDIFF+i]*R[i];
						J[r*NDIFF+i] = 0.0;
					}
				if( i==NDIFF-1 ) {
					nc2=NDIFF;
					break;
				}
				else
					i++;
			}
		}
		if( nc2==NDIFF+1 )
			/* Termination: residual within bound on first row */
			break;

		/* Compute A = J_hat * J_hat^T */
		for(j=0;j<nc2;j++)
			for(i=0;i<=j;i++) {
				A[i*nc2+j] = 0.0;
				for(k=0;k<NDIFF;k++) A[i*nc2+j]+=J[i*NDIFF+k]*J[j*NDIFF+k];
			}
		for(i=0;i<nc2;i++)
			for(j=0;j<i;j++)
				A[i*nc2+j]=A[j*nc2+i];

		/* Construct (J_hat * J_hat^T)^(-1) in iA */
		for(i=0;i<nc2*nc2;i++) iA[i]=0.0;
		for(i=0;i<nc2;i++) iA[i*(1+nc2)]=1.0;
		DecompCInc(nc2, A, nc2, ip);
		MultiSolveCInc(nc2, A, nc2, ip, nc2, iA, nc2);

		/* Multiply iA (nc2 x nc2) with R (nc2 x 1) to A (nc2 x 1)
			A = (J_hat * J_hat^T)^(-1) * R */
		for(i=0;i<nc2;i++) {
			A[i] = 0.0;
			for(k=0;k<nc2;k++) A[i] += iA[i*nc2+k]*R[k];
		}

		/* Multiply J_hat^T (NDIFF x nc2) with A (nc2 x 1) to iA (NDIFF x 1)
			 iA = J_hat^T * (J_hat * J_hat^T)^(-1) * R */
		for(i=0;i<NDIFF;i++) {
			iA[i] = 0.0;
			for(k=0;k<nc2;k++) iA[i] += J[k*NDIFF+i]*A[k];
		}

		val=0.0; for(i=0;i<NDIFF;i++) val+=x[i]*x[i]; val=sqrt(val);
		val2=0.0; for(i=0;i<NDIFF;i++) val2+=iA[i]*iA[i]; val2=sqrt(val2);
		val = val2/((val>0.1*val2)?val:(0.1*val2));
		if( val>0.1 ) {
			/* Solution is very far off - Use relaxed */
			val2 = ( tol>0.1/val )?tol:(0.1/val);
			for(i=0;i<NDIFF;i++) x[per[i]]-=val2*iA[i];
		}
		else
			/* Direct newton */
			for(i=0;i<NDIFF;i++) x[per[i]]-=iA[i];
	}
	if( iter==maxiter ) return(3); else return(0);
}

static void mdlInitializeSizes(SimStruct *S)
{
	ssSetNumSFcnParams(S, 1);
	if( ssGetNumSFcnParams(S) != ssGetSFcnParamsCount(S) ) return;
	ssSetNumContStates(S, NDIFF);
	ssSetNumDiscStates(S, 0);

	if( !ssSetNumInputPorts(S, 1) ) return;
	ssSetInputPortWidth(S, 0, NINP);
	ssSetInputPortDirectFeedThrough(S, 0, 1);

	if( !ssSetNumOutputPorts(S, 1) ) return;
	ssSetOutputPortWidth(S, 0, NOUT);

	ssSetNumSampleTimes(S, 1);
	ssSetNumRWork(S, 1+2*NEQ+NPAR+NDIFF+NEVT);
	ssSetNumIWork(S, 2*NEVT+2*NZC);
	ssSetNumPWork(S, 0);
	ssSetNumModes(S, 0);
	ssSetNumNonsampledZCs(S, 0);

	ssSetOptions(S, SS_OPTION_EXCEPTION_FREE_CODE);
}

static void mdlInitializeSampleTimes(SimStruct *S)
{
	ssSetSampleTime(S, 0, CONTINUOUS_SAMPLE_TIME);
	ssSetOffsetTime(S, 0, 0.0);
	ssSetModelReferenceSampleTimeDefaultInheritance(S);
}

static void InitializeConditions(SimStruct *S, int_T useinputs)
{
	real_T *w = ssGetRWork(S);
	real_T t = ssGetT(S);
	real_T *ic = mxGetData(ssGetSFcnParam(S,0));
	real_T *x = ssGetContStates(S);
	InputRealPtrsType i;
	int_T j;

	w[0]=0.0;
	for(j=0;j<NDIFF;j++) {
		x[j]=ic[j];
		w[j+1]=x[j];
	}
	w[37] =  0.00000000000000000e+00;
	w[38] =  7.85398163397448315e+01;
	w[39] =  0.00000000000000000e+00;
	w[40] =  7.85398163397448315e+01;
	w[41] =  0.00000000000000000e+00;
	w[42] =  0.00000000000000000e+00;
	w[43] =  7.85398163397448315e+01;
	w[44] =  0.00000000000000000e+00;
	w[45] =  7.85398163397448315e+01;
	w[46] =  0.00000000000000000e+00;
	w[47] =  0.00000000000000000e+00;
	w[48] =  7.85398163397448315e+01;
	w[49] =  0.00000000000000000e+00;
	w[50] =  7.85398163397448315e+01;
	w[51] =  0.00000000000000000e+00;
	w[52] =  0.00000000000000000e+00;
	w[53] =  1.38888888888888886e+02;
	w[54] =  1.38908888888888896e+02;
	w[55] =  0.00000000000000000e+00;
	w[56] =  1.00000000000000000e+00;
	w[57] =  1.00000000000000000e+00;
	w[58] =  0.00000000000000000e+00;
	w[59] =  1.38888888888888886e+02;
	w[60] =  1.38908888888888896e+02;
	w[61] =  0.00000000000000000e+00;
	w[62] =  1.00000000000000000e+00;
	w[63] =  1.00000000000000000e+00;
	w[64] =  0.00000000000000000e+00;
	w[65] =  1.38888888888888886e+02;
	w[66] =  1.38908888888888896e+02;
	w[67] =  0.00000000000000000e+00;
	w[68] =  1.00000000000000000e+00;
	w[69] =  1.00000000000000000e+00;
	w[70] =  0.00000000000000000e+00;
	w[71] =  1.38888888888888886e+02;
	w[72] =  1.38908888888888896e+02;
	w[73] =  0.00000000000000000e+00;
	w[74] =  1.00000000000000000e+00;
	w[75] =  1.00000000000000000e+00;
	w[76] =  0.00000000000000000e+00;
	w[77] =  4.62962962962962976e+01;
	w[78] =  4.63162962962962936e+01;
	w[79] =  0.00000000000000000e+00;
	w[80] =  1.00000000000000000e+00;
	w[81] =  1.00000000000000000e+00;
	w[82] =  0.00000000000000000e+00;
	w[83] =  2.77777777777777786e+01;
	w[84] =  2.77977777777777781e+01;
	w[85] =  0.00000000000000000e+00;
	w[86] =  1.00000000000000000e+00;
	w[87] =  1.00000000000000000e+00;
	w[88] = -1.00000000000000000e+00;
	w[89] = -1.00000000000000000e+00;
	w[90] = -1.00000000000000000e+00;
	w[91] = -1.00000000000000000e+00;
	w[92] = -1.00000000000000000e+00;
	w[93] = -1.00000000000000000e+00;
	w[94] =  0.00000000000000000e+00;
	w[95] =  0.00000000000000000e+00;
	w[96] =  0.00000000000000000e+00;
	w[97] =  0.00000000000000000e+00;
	w[98] =  0.00000000000000000e+00;
	w[99] =  0.00000000000000000e+00;
	w[100] =  0.00000000000000000e+00;
	w[101] =  0.00000000000000000e+00;
	w[102] =  0.00000000000000000e+00;
	w[103] =  0.00000000000000000e+00;
	w[104] =  0.00000000000000000e+00;
	w[105] =  0.00000000000000000e+00;
	w[106] =  0.00000000000000000e+00;
	w[107] =  0.00000000000000000e+00;
	w[108] =  0.00000000000000000e+00;
	w[109] = -0.00000000000000000e+00;
	w[110] = -0.00000000000000000e+00;
	w[111] = -0.00000000000000000e+00;
	w[112] =  1.00000000000000000e+00;
	w[113] =  1.00000000000000000e+00;
	w[114] =  1.00000000000000000e+00;
	w[115] =  1.00000000000000000e+00;
	w[116] =  1.00000000000000000e+00;
	w[117] =  1.00000000000000000e+00;
	if(useinputs) {
		i = ssGetInputPortRealSignalPtrs(S,0);
		for(j=0; j<NINP; j++) w[j+NDIFF+NIX1-NINP+1]=i[j][0];
	}
	if(NIX1>0) fp(NEQ,w[0],&w[1],&w[NEQ+NPAR+1]);
}

#define MDL_INITIALIZE_CONDITIONS
static void mdlInitializeConditions(SimStruct *S)
{
	InitializeConditions(S,0);
}

static real_T *GetUpdatedWork(SimStruct *S)
{
	int_T j,flag;

	real_T *w = ssGetRWork(S);
	real_T t = ssGetT(S);
	real_T *x = ssGetContStates(S);
	InputRealPtrsType i = ssGetInputPortRealSignalPtrs(S,0);

	flag=0;
	if( w[0]!=t ) { flag=1; w[0]=t; }
	for(j=0; j<NDIFF; j++) if( w[j+1]!=x[j] ) { flag=1; w[j+1]=x[j]; }
	for(j=0; j<NINP; j++) if( w[j+NDIFF+NIX1-NINP+1]!=i[j][0] ) { flag=1; w[j+NDIFF+NIX1-NINP+1]=i[j][0]; }

	if(flag) fp(NEQ,w[0],&w[1],&w[NEQ+NPAR+1]);

	return(w);
}

static void mdlOutputs(SimStruct *S, int_T tid)
{
	real_T *w, *y = ssGetOutputPortRealSignal(S,0);

	w=GetUpdatedWork(S);
	otp(w[0],&w[1],&w[NEQ+NPAR+1]);
	y[ 0]=w[33];
	y[ 1]=w[31];
	y[ 2]=w[35];
	y[ 3]=w[109];
	y[ 4]=w[110];
	y[ 5]=w[111];
}

#define MDL_DERIVATIVES
static void mdlDerivatives(SimStruct *S)
{
	real_T *w,*dx = ssGetdX(S);
	int_T i;

	w=GetUpdatedWork(S);
	for(i=0;i<NDIFF;i++) dx[i]=w[NEQ+NPAR+1+i];
}

#define MDL_PROJECTION
static void mdlProjection(SimStruct *S)
{
	real_T *w, *x = ssGetContStates(S);
	int_T i;

	w=GetUpdatedWork(S);
	i=Projection(w[0],&w[1],CONTOL,CONITER);
	for(i=0;i<NDIFF;i++) x[i]=w[i+1];
	fp(NEQ,w[0],&w[1],&w[NEQ+NPAR+1]);
}

static void mdlTerminate(SimStruct *S) { UNUSED_ARG(S); }

#ifdef  MATLAB_MEX_FILE    /* Being compiled as a MEX-file? */
#include "simulink.c"      /* MEX-file interface mechanism */
#else
#include "cg_sfun.h"       /* Code generation registration function */
#endif
